<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>模拟器预约详情</title>
    <link rel="stylesheet" type="text/css" href="../../../css/aui/aui_2_0.css" />
    <link rel="stylesheet" type="text/css" href="../../../css/mobiscroll/normalize3_0_2_min.css" />
    <link rel="stylesheet" type="text/css" href="../../../css/mobiscroll/mobiscroll.css" />
	<link rel="stylesheet" type="text/css" href="../../../css/mobiscroll/mobiscroll_date.css"/>
    <link rel="stylesheet" type="text/css" href="../../../css/common/common.css" />
    <style>
    	html,body{
    		background-color: #F5F5F5;
    	}
    	.aui-bar-nav,.aui-bar-tab{
    	    background-color: #ffffff;
    	}
    	.aui-bar-nav{
    		color:#2c2c2c;
    		font-weight: 700;
    	}
	   	a.aui-pull-left, a.aui-pull-right {
		    color: #35A7FF;
		}
		header img {
		    width: 20px;
		}
    	#practical_appointment_title{
    		font-weight:normal;
    	}
		.screen{
		    /* float: left !important;
		       			margin-right: 0.8rem; */
		}
		.screen img{
			width: 0.8rem;
    		margin-bottom: -0.05rem;
		}
		.active{
	    	color: #1E8DD8;
		    border-bottom: solid 2px #1E8DD8;
    		/* border-bottom: solid 2px; */
	    }
	    .practical-list{
	        background: #FFF;
		    width: 96%;
		    margin-left: 4%;
	        font-size: 0.7rem;
	        margin-bottom: 4rem;
	    }
	    .practical-list li{
	    	height:3rem;
	    	line-height:3rem;
	    }
	    .practical-list-item{
	    	height:3rem;
	    	padding: 0rem 0.5rem;
	    }
	    .practical-list-item-param{
    	    float: left;
    		height:3rem;
	    }
	    .practical-list-item-param input{
	        margin-top: 0.9rem;
	    }
	    .c-btn{
	    	width:10%;
	    	-webkit-transition: 0.3s ease;
	    	text-align: left;
	    }
	    .dark{
	    	color:#A0A0A0;
	    }
	    .appointment-button{
	    	
	    }
	    .appointment-button span{
		    color: #0595F2;
		    padding: 0.2rem 0rem;
		    border-radius: 0.5rem;
		    font-weight:bold;
	    }
	    .other-item{
	    	width:100%;
	    	overflow:hidden;
    	    -webkit-transition: 0.3s ease;
    	    float: right;
	    }
	    .w-90{
	    	width:90% !important;
	    }
	    .text-r{
	    	text-align:right;
	    }
	    .text-c{
	    	text-align:center;
	    }
	    .text-l{
	    	text-align:center;
	    }
	    .practical-list-item-param font{
	    	color:#03B4F7;
	    }
	    .practical-select{
	    	
	    }
	    .select_practical_input{
    	    text-align: left;
		    height: 2rem;
		    line-height: 2rem;
	    }
	    .select_practical_title{
		    font-weight: bold;
		    text-align: left;
		    height: 1.7rem;
		    line-height: 1.7rem;
		    margin-top: 0.5rem;
		    padding-left: 4%;
		}
		#appointment-date{
			text-align: left;
		    margin-left: 4%;
		    width: 92%;
		    background: #FFFFFF;
		    padding-left: 1.2rem;
		}
		.select_practical_title img{
		    width: 1rem;
			margin-bottom: -0.2rem;
		}
		.nav {
	        height: 100%;
	        overflow-x: scroll;
	        overflow-y: hidden;
	        background-color: #FFFFFF;
	        /*解决ios上滑动不流畅*/
	        -webkit-overflow-scrolling: touch;
	    }
	    .con {
	        height: 100%;
		    display: -webkit-box;
		    align-items: center;
	        position: relative;
	    }
	    .con>li {
	        text-align: center;
		    font-size: 0.8rem;
		    min-width: 3rem;
		    list-style: none;
		    margin: 0rem 0.5rem;
	    }
	    .container {
            height: 2.5rem;
		    line-height: 2.5rem;
		    -webkit-box-sizing: border-box;
		    box-sizing: border-box;
		    overflow: hidden;
	        margin-left: 4%;
	    }
	    .container ::-webkit-scrollbar {
	        display: none;
	    }
	    .lump{
		    float: left;
		    padding: 0rem 1rem;
		    font-size: 0.8rem;
		    color: #6F6F6F;
		    height: 2rem;
		    border-radius: 5px;
		    border: solid 1px #F1F1F1;
		    line-height: 2rem;
	    }
	    .lump-active {
		    color: #1E8DD8 !important;
		    border-bottom: solid 2px #1E8DD8 !important;
		    /*background: #DDEBFF !important;*/
		    /*border-radius: 5px;*/
		}
		.list_bar .list_bar_inner {
		    position: absolute;
		    min-width: 0rem;
		    height: 100%;
		    top: 0;
		    left: 50%;
		    background-color: #1E8DD8;
		    -webkit-transform: translateX(-50%);
		    transform: translateX(-50%);
		    -webkit-transition: 0.3s ease;
		}
		.margin-top-0-5{
			margin-top:0.5rem !important;
		}
		.empty-img{
			width: 2rem;
    		margin-bottom: -0.35rem;
		}
		.load-src{
			width: 100%;
    		display: flex;
    		height: 8rem;
		}
		.load-src img{
		    width: 5rem;
    		margin: auto;
		}
		.msg-src{
			width: 100%;
			text-align:center;
			padding-bottom: 3rem;
		}
		.msg-src img{
			width: 4rem;
    		margin-top: 3rem;
		}
		.msg-src span{
			font-size:0.7rem;
			color:#767676;
		}
		.fixed-b{
			position: fixed;
		    bottom: 0.5rem;
		    margin: auto;
		}
		#holayshit{
			color:#DC251F;
			font-size:0.6rem;
		}
		.notice_importent{
			height: 2rem;
		    line-height: 2rem;
		    text-align: center;
		    position: fixed;
		    top: 0;
		    width: 100%;
		    color: #DC251F;
		    background: #F5D3D3;
		    opacity: 0.8;
		}
		#test-date {
		    text-align: left;
		    margin-left: 4%;
		    width: 92%;
		    background: #FFFFFF;
		    padding-left: 1.2rem;
		}
		
		.rights{
			position:absolute;
			margin-top:0.5rem;
			z-index: 999;
			right:0rem;
			padding:0 0.3rem;
			width:2.6rem;
			line-height:0.7rem;
			background: #FFFFFF;
			font-size:0.5rem;
			text-align: center;
			color: #043EB8;
		}
		.b-left{
			width:65%;
			border-radius: 2rem 0rem 0rem 2rem;
		}
		.b-right{
			width:25%;
			right:5%;
			background: linear-gradient(to right, #03B4F7 , #79D6FA) !important;
			border-radius: 0rem 2rem 2rem 0rem;
		}
    </style>
</head>
<body>
	<section class='practical-select' style='margin-top: 1rem;'>
			<div class="select_practical_title">
				<img src="../../../icon/subject/icon_area.png" alt="" />
				<span>培训地点</span>
			</div>
			<div class="select_practical_input trainingName" style="background:#FFFFFF;margin-left:4%;margin-right:4%;padding-left:1rem;">
				上虞区xxx理论培训中心
			</div>
	</section>
	<section class='practical-select' style='margin-top: 1rem;'>
			<div class="select_practical_title">
				<img src="../../../icon/common/icon_date.png" alt="" />
				<span>培训日期</span>
			</div>
			<div class="select_practical_input">
				<input type="text" id="appointment-date" onchange="selectDate()" style='margin-left: 4%;'>
			</div>
	</section>
	<section class='practical-select'>
		<div class="select_practical_title">
			<img src="../../../icon/subject/icon_law.png" alt="" />
			<span>请选择教室</span>
	    </div>
	    <div class="container" style="">
	        <nav class="nav" id="class_nav">
	            <ul class="con">
	            </ul>
	        </nav>
        </div>
	</section>
	<script type="text/template" charset="utf-8" id='area_src'>
		{{ for(var i=0;i<it.length;i++){ }}
			<li class="menuLi" tapmode onclick="selectClassroom(this,'{{=it[i].id}}','{{=it[i].name}}')">
	        	{{=it[i].name}}
	        </li>
		{{ } }}
    	<li class="list_bar" id="class_navs">
            <div class="list_bar"></div>
        </li>
	</script>
	<section class='practical-select'>
		<div class="select_practical_title">
			<img src="../../../icon/subject/icon_cars.png" alt="" />
			<span>选择车型</span>
	    </div>
		<div class="container" style="">
			<nav class="nav" id="area_nav">
				<ul class="con">
				<li class="menuLi c1" tapmode onclick="selectArea(this,'C1')">
		        	C1
		        </li>
		        <li class="menuLi" tapmode onclick="selectArea(this,'C2')">
		        	C2
		        </li>
		        <li class="list_bar" id="slideSpan">
		            <div class="list_bar_inner"></div>
		        </li>
				</ul>
			</nav>
		</div>		
	</section>
    <div class='practical-list'>
    	<ul>
    		<li class='bottom-slide'>
    			<div class="practical-list-item">
    				<div class="practical-list-item-param c-btn aui-hide">  					
    				</div>
    				<div class='other-item bottom-slide w-90'>
	    				<div class="practical-list-item-param text-c" style="width:50%;">预约时间段</div>
	    				<div class="practical-list-item-param text-c" style="width:50%;">已预约/设备数</div>
    				</div>
    			</div>
    		</li>
    		<div id='data_list'>
    			<div class='load-src'>
		    		<img src="../../../icon/common/icon_common_load.gif" alt="" />
		    	</div>
    		</div>
    	</ul>
    	 <!--<ul>-->
    		<!--<li class='bottom-slide'>
    			<div class="practical-list-item">
    				<div class="practical-list-item-param c-btn aui-hide">
    					
    				</div>
    				<div class='other-item'>
    					<div class="practical-list-item-param text-c" style="width:36%;">预约时间段</div>
	    				<div class="practical-list-item-param text-l" style="width:28%;">费用</div>
	    				<div class="practical-list-item-param text-r" style="width:36%;">已预约/设备数</div>
    				</div>
    			</div>
    		</li>-->
    		<!--<li>
    			<div class="practical-list-item dark">
    				<div class="practical-list-item-param c-btn aui-hide">
    					
    				</div>
    				<div class='other-item'>
	    				<div class="practical-list-item-param text-c" style="width:36%;">08:00 ~ 09:00</div>
    					<div class="practical-list-item-param text-l" style="width:28%;">50.0</div>
	    				<div class="practical-list-item-param text-r" style="width:36%;font-weight: bold;">12/12</div>
    				</div>
    			</div>
    		</li>-->
    		<!--<li class='checkStyle'>
    			<div class="practical-list-item">
    				<div class="practical-list-item-param c-btn aui-hide">
    					<input class="aui-radio" type="checkbox" name="appointment1">
    				</div>
    				<div class='other-item' tapmode onclick="selectTimeSlot()">
	    				<div class="practical-list-item-param text-c" style="width:36%;">09:00 ~ 10:00</div>
	    				<div class="practical-list-item-param text-l" style="width:28%;">60.0</div>
	    				<div class="practical-list-item-param text-r" style="width:36%;font-weight: bold;"><font>11</font>/13</div>
    				</div>
    			</div>
    		</li>-->
    	<!--</ul>--> 
    	<!--<div class="aui-btn aui-btn-info aui-btn-block fixed-b" tapmode onclick="appointBatch()" style="display: none"  id='appointment_btn'>批量预约</div>
    	<div style="margin-left: 1rem;" onclick='batch()'>预约</div><div onclick='cancelBatch()'>取消批量</div>-->
    </div>
    		<div class="aui-btn aui-btn-info aui-btn-block fixed-b b-left aui-hide appointBnt" style='margin-left:4%' tapmode onclick="appointBatch()">预约</div>
    		<div class="aui-btn aui-btn-info aui-btn-block fixed-b b-right aui-hide planStatusBnt" tapmode onclick="get_plan_status()">充值</div>
    <script type="text/template" charset="utf-8" id='load_src'>
    	<div class='load-src'>
	    	<img src="../../icon/common/icon_common_load.gif" alt="" />
    	</div>
  	</script>
    <script type="text/template" charset="utf-8" id='msg_src'>
    	<div class='msg-src'>
    		<img src="../../../icon/common/empty.png" alt="" /><br>
    		<span>{{=it.msg}}</span>
    	</div>
  	</script>
  	<script type="text/template" charset="utf-8" id='classroom_msg_src'>
    	<li>
	    	<img src="../../../icon/common/icon_empty.png" alt="" class='empty-img'/>
	    	<span>{{=it.msg}}</span>
	    </li>
    </script>
    <script type="text/template" charset="utf-8" id='simulator_src'>
    	{{ for(var i=0;i<it.length;i++){ }}
    		<li class='checkStyle'>
    			{{ if(it[i].orderSum >= it[i].simulatorSum){ }}
	    		<div class="practical-list-item dark">
    			{{ }else{ }}
	    		<div class="practical-list-item" >
    			{{ } }}
    				<div class="practical-list-item-param c-btn">
    					{{ if(it[i].orderSum >= it[i].simulatorSum || it[i].lessonStatus==3){ }}
    						<input class="aui-radio" type="checkbox" name="simulator_appointment" value="{{=it[i].id}}" disabled>
	    				{{ }else{ }}
							<input class="aui-radio" type="checkbox" name="simulator_appointment" value="{{=it[i].id}}">
						{{ } }}
    				</div>
    				<div class='other-item w-90' tapmode onclick="selectTimeSlot(this,'{{=it[i].id}}')">
	    				<div class="practical-list-item-param text-c" style="width:50%;">{{=it[i].beginDate.substr(10,6)}} ~{{=it[i].endDate.substr(10,6)}}</div>
	    				<div class="practical-list-item-param text-c" style="width:50%;font-weight: bold;">
	    					{{ if(it[i].orderSum >= it[i].simulatorSum){ }}
	    						预约已满
	    					{{ }else{ }}
		    					<font>{{=it[i].orderSum}}</font>/{{=it[i].simulatorSum}}
	    					{{ } }}
	    				</div>
					</div>
    			</div>
    		</li>
    	{{ } }}
    	<!--<div class="aui-btn aui-btn-info aui-btn-block" tapmode onclick="appointBatch()" style="margin-bottom:5rem;position: fixed" id='appointment_btn'>批量预约</div>-->
    </script>   
</body>
<script type="text/javascript" src="../../../script/api.js"></script>
<script type="text/javascript" src="../../../script/jquery_3_2_1_min.js"></script>
<script type="text/javascript" src="../../../script/doT_min.js"></script>
<script type="text/javascript" src="../../../script/mobiscroll/mobile_select.js"></script> 
<script type="text/javascript" src="../../../script/mobiscroll/mobiscroll_date.js"></script> 
<script type="text/javascript" src="../../../script/mobiscroll/mobiscroll.js"></script> 
<script type="text/javascript" src="../../../script/common/common.js"></script>
<script type="text/javascript">
	var cache;
	var headerPos;
	var load_src = $('#loadP_src').html();
	var msg_src = $('#msg_src').html();
	var classroom_msg_src = $('#classroom_msg_src').html();
	var begin_time;
	var end_time;
	var clearance = 5;
	var areaName='C1';//车型c1c2
	var classroomId;//教室id
	var simulatorId;
	var orderId;
	var className;
	var carTypeName;
	apiready = function(){
		api.parseTapmode();
		cache = api.pageParam;
		simulatorId = cache.d_school_name;
		console.log('传参'+JSON.stringify(cache));
		$('.trainingName').text(cache.d_school_name);
		var startDate = (new Date(new Date().getTime())).Format('yyyy-MM-dd'); //30天内
		var endDate = (new Date(new Date().getTime() + 30 * 24 * 60 * 60 * 1000)).Format('yyyy-MM-dd'); //30天内
		$('#appointment-date').val(startDate);
		appointDate = startDate;
		mobiscrollDate(startDate, endDate, $('#appointment-date'), '最近'); //初始化日期组件
		f_slide($('.c1'));
		load_area();
	}	
	/**
	 * 加载教室 
	 */
	function load_area(){
		url = 'api/courseReservation/get/getClassRoom';
		params = {
			trainingCenterId: cache.id
		}
		ajax_Request(url, 'get', 'json', params, function(ret,err){
			log('教室数据',ret);
			if(ret){
				if(ret.code == 0){
					if(ret.classroomList.length > 0){
						var area_src = $('#area_src').html();
						$('#class_nav').find('.con').html(doT.template(area_src)(ret.classroomList));
						classRoom_slide($('#class_nav').find('.menuLi').eq(0));//初始化加载menu下拉选中
						classroomId = ret.classroomList[0].id;
						init(classroomId);
						api.parseTapmode();
					}else{
						init();
						$('#class_nav').find('.con').html(doT.template(classroom_msg_src)({msg:'暂无教室'}));
					}
				}else{
					init();
					$('#class_nav').find('.con').html(doT.template(classroom_msg_src)({msg:'暂无教室'}));
				}
			}else{
				init();
				$('#class_nav').find('.con').html(doT.template(classroom_msg_src)({msg:'服务器繁忙，请稍后重试'}));
			}
		});
	}
	
	//模拟器排班
	function init(classroomId){
		url = "api/Simulator/simulator-by-lessondate";
		params = {
			trainingCenterId:cache.id,  //培训教室id
			lessonDate:$('#appointment-date').val(),
			carType:areaName,
			classroomId:classroomId,
			learnerId:getUserId()
		}
		log('模拟器数据params',params);
		ajax_Request(url, 'get', 'json', params, function(ret,err){
			log('模拟器数据',ret);
			if(ret){
				if(ret.code == 0){
					if(ret.planPrice==0){
						$('.appointBnt').removeClass('aui-hide');
						$('.appointBnt').removeClass('b-left');
					}else{
						$('.appointBnt').removeClass('aui-hide');
						$('.planStatusBnt').removeClass('aui-hide');
						
					}
					if(ret.dsmLessonK2Simulators.length > 0){
						var simulator_src = $('#simulator_src').html();
						$('#data_list').html(doT.template(simulator_src)(ret.dsmLessonK2Simulators));
						api.parseTapmode();
						api.hideProgress();
					}else{
						$('#data_list').html(doT.template(msg_src)({msg:'无排班数据'}));
						api.hideProgress();
					}
				}else{
					
						if(ret.code == '400238'){
						
							openMessage('提示','注意：您已经支付过'+ret.traingCenterName+'模拟器预约费用，请勿重复支付。','确定','','closeWin()','',null);
						}
						
						if(ret.code == '400241'){						
							openMessage('提示','培训中心选择错误，请您选择'+ret.traingCenterName+'进行预约。','确定','','closeWin()','',null);
							
						}
						$('#data_list').html(doT.template(msg_src)({
							msg: ret.msg
						}));
						api.hideProgress();	
				}		
			}else{
				$('#data_list').html(doT.template(msg_src)({msg:ret.msg}));
				api.hideProgress();
			}
			api.hideProgress();
		});
	}
	
	function get_plan_status(){
	url = 'api/Simulator/get-plan-status'
		params = {
			learnerId: getUserId()
		}
		ajax_Request(url, 'get', 'json', params, function(ret,err){
			log('教室数据',ret);
			if(ret){
				if(ret.code == -3){
					openPayfor();
				}else if(ret.code==0){
					alert_msg('您已充值过套餐');	
				}else{
					alert_msg(ret.msg);	
				}
			}else{
				alert_msg('服务器繁忙，请稍后重试');
				
			}
		});
	
	
	
	}
	
	function openPayfor(){		
		params = {
			name:'simulator_set_meal_pay',
			orderId:orderId,
			className:className,
			id:cache.id,
			areaName:areaName
		}	
		log('params++++++',params)
		commonOpenWin('simulator_appointment_pay_for_win',params);
	}
	
	
	//选择车型
		function selectArea(e,area_name) {
			defaultload('获取数据中...')
			areaName = area_name;
			f_slide($(e));
			console.log(area_name);
			init(classroomId);
		}	
	//选择教室
		function selectClassroom(e,class_id,class_name) {
			defaultload('获取数据中...')
			className = class_name;
			classroomId = class_id;
			classRoom_slide($(e));
			console.log(classroomId);
			init(classroomId);	
		}
	//提交预约 
	function appointBatch() {
		var simulator_ids = getcheckbox();
		if (simulator_ids == '' || simulator_ids == null || simulator_ids == undefined) {
			alert_msg('请选择排班');return;
		}
		url = 'api/Simulator/subscribe';
		params = {
			ids:getcheckbox(),
			learnerId:getUserId(),
			carType:areaName,
			trainingCenterId: cache.id,
			lessonDate:$('#appointment-date').val(),
		}
		defaultload('提交数据中...')
		log('传参',params);
		ajax_Request(url, 'post', 'json', params, function(ret,err){
			log('模拟器预约信息提交返回',ret);
			api.hideProgress();
			if(ret){
				if(ret.code == 0){
					back_information(ret.id);	
					sum=ret.sum;
				}else{
					if(ret.code == -3){
						orderId=ret.orderId;
						openMessage('提示','您还未充值线下理论培训包，请先充值。','确定','','','',null);
						api.hideProgress();
						return;
					}
					if(ret.code == '400239'){
					
						openMessage('提示','您的预约次数已经用完，请联系驾所通客服为您处理。','确定','','closeWin()','',null);
						
						api.hideProgress();
						return;
					}
					var str='';
	            	if(ret.code == 400216){
	              		for(var i = 0;i < ret.repeatInfo.length;i++){  
			                if(i == 0) str=ret.repeatInfo[0].beginDate.substr(10,6)+'~'+ret.repeatInfo[0].endDate.substr(10,6);
                			else str+=','+ret.repeatInfo[i].beginDate.substr(10,6)+'~'+ret.repeatInfo[i].endDate.substr(10,6);
	              		}
	              		str='&emsp;您已预约过车型：'+areaName+',时间为：'+str+'的模拟器，请勿重复预约'
	              		openMessage('提示',str,'确定','','','',null);
	              		return;
					}
					if(ret.code == 400232){
						alert_msg(ret.msg);
						api.hideProgress();
						return;
					}
					if(ret.code == 5){
						for(var i = 0;i < ret.simulatorLessonFalseInfo.length;i++){  
			                if(i == 0) str=ret.simulatorLessonFalseInfo[0].beginDate.substr(10,6)+'~'+ret.simulatorLessonFalseInfo[0].endDate.substr(10,6);
                			else str+=','+ret.simulatorLessonFalseInfo[i].beginDate.substr(10,6)+'~'+ret.simulatorLessonFalseInfo[i].endDate.substr(10,6);
	              		}
	              		str='时间为:'+str+'的模拟器与集中培训预约课程时间冲突'
	              		openMessage('提示',str,'确定','','','',null);
	              		return;
					}
					
					alert_msg(ret.msg);
				}
				api.hideProgress();
			}else{
				api.hideProgress();
				alert_msg('服务器繁忙，请稍后重试');
			}
			
		});
	}

	function back_information(orderId){
		url = 'api/Simulator/get/payDetailListById';
		params = {
			lessonK2SimulatorOrderId:orderId,	
			learnerId:getUserId()	
		}
		log('传参',params);
		defaultload('提交预约信息中');
		ajax_Request(url, 'get', 'json', params, function(ret,err){
			closedefaultload();
			log('预约信息返回',ret);
			if(ret){
				if(ret.code == 0){
					cache.lessonListByIdList = ret.lessonListByIdList;
					cache.sum = sum;
					cache.orderId = orderId;
					cache.areaName = areaName;
					cache.tcmSchoolId = ret.schoolInfo.id;
					cache.name='simulator_appointment_pay_for_frm';
					data = cache;
					console.log(JSON.stringify(cache));
					commonOpenWin('simulator_appointment_pay_for_win', data);
				}else{
					alert_msg(ret.msg);
				}
			}else{
				alert_msg('服务器繁忙，请稍后再试！');
			}
		});
	}
	
	//选择该时间段
	function selectTimeSlot(e,id){
		$(e).parent().find("input[type='checkbox']").click();
	}
	
	// 选择日期 
	function selectDate() {
		appointDate = $('#appointment-date').val();
		init(classroomId);
	}
	
	/**
		 * 获取被选择的复选框
		 */
	function getcheckbox() {
		var userids = [];
		var str = {};
		var idsList;
		$("input[type='checkbox']:checked").each(function(i) {
			//使用循环遍历迭代的方式得到所有被选中的checkbox复选框
			str = "{" + "id:" + $(this).val() + "}";
			userids.push(str); //当前被选中checkbox背后对应的值
			idsList = "[" + userids.toString() + "]";
		})

		return idsList;
	}
	
	//title标题 content内容 sureButton确认按钮文字 sureFunc确定方法 cancelFunc取消方法 cancelButton取消按钮文字 params额外参数，没有必须传null
      function openMessage(title,content,sureButton,cancelButton,sureFunc,cancelFunc,params){
			api.openFrame({
		        name: 'common_alert',
		        url: '../../common/common_alert.html',
		        bgColor: 'rgba(0,0,0,0.4)',
		        rect: {
		            x: 0,
		            y: 0,
		            w: 'auto',
		            h: api.winHeight
		        },
		        bounces: false,
		        pageParam:{
		        	title:title,
		        	content:content,
		        	sureButton:sureButton,
		        	sureFunc:sureFunc,
		        	cancelButton:cancelButton,
		        	cancelFunc:cancelFunc,
		        	winName:api.winName,
		        	frameName:api.frameName,
		        	params:params
		        },
		        softInputBarEnabled:true,
		        softInputMode:'resize'
		    });
		}
      //车型切换
		function f_slide(e) {
			$('#area_nav').find('li').removeClass('active');
			$(e).addClass('active');
			$('.list_bar').css('width', ($('.active').width() - clearance * 2) + 'px');
//			$('.list_bar_inner').css('width', ($('.active').width() - clearance * 2) + 'px');
//			document.getElementById('slideSpan').style.webkitTransform = 'translateX(' + ($(e).position().left + clearance) +
//				'px)';
//			$("#area_nav").animate({
//				scrollLeft: $(e).position().left - 130 + 'px'
//			}, 500);
		}
		
		//教室切换
		function classRoom_slide(e) {
			$('#class_nav').find('li').removeClass('lump-active');
			$(e).addClass('lump-active');
			$('.list_bar').css('width', ($('.lump-active').width() - clearance * 2) + 'px');
		}
		
		function closeWin(){	
			api.closeWin({			
            });	
		}
</script>
</html>