<!DOCTYPE html>
 <html>
 <head>
 	<meta charset="utf-8">
     <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
     <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
     <title>订单详情</title>
     <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
     <link rel="stylesheet" type="text/css" href="../../css/aui/aui_2_0.css" />
     <link rel="stylesheet" type="text/css" href="../../css/common/common.css" />
     <style>
     	html{
     		background-color: #EFEFF4;
     	}
     	.aui-bar-nav,.aui-bar-tab{
       	    background-color: #EFEFF4;
     	}
     	.aui-bar-nav{
     		color:#2c2c2c;
     	}
 	   	a.aui-pull-left, a.aui-pull-right {
 		    color: #35A7FF;
 		}
 		header img {
 		    width: 20px;
 		}
 		#common_title{
     		font-weight:normal;
     		color:#2E2E2E;
     	}
     	footer{
     		height: 2.5rem;
 		    position: absolute;
 		    bottom: 0;
 		    width: 100%;
 		    font-size: 0.7rem;
     	}
     	.aui-bar-nav {
 		    top: 0;
 		    line-height: 2.25rem;
 		    background-color: #EFEFF4;
 		    color: #000;

 		}
 		.footer-input{
 			float: left;
 		    height: 2.5rem;
 		    width: 70%;
 		    padding-left: 0.5rem;
 		}
 		.footer-input input{
 		    min-height: 1.7rem;
 		    background: #F1F1F1;
 		    padding: 0 0.5rem;
 		    margin-top: 0.4rem;
 		    border-radius: 1rem;
 		    line-height: 1.7rem;
 		}
 		.footer-send{
 			width:15%;
 			float:right;
 			height: 2.5rem;
 			display: flex;
 		}
 		.footer-opinion{
 			width:15%;
 			float:right;
 			height: 2.5rem;
 			display: flex;
 		    position: relative;
 		}
 		.footer-opinion img{
 			width: 1.3rem;
     		margin: auto;
 		}
 		.footer-send img{
 			width: 1.3rem;
     		margin: auto;
 		}
 		.opinion-num{
 			position: absolute;
 		    background: #F45454;
 		    color: #FFF;
 		    padding: 0rem 0.2rem;
 		    border-radius: 0.5rem;
 		    font-size: 0.5rem;
 		    right: 0.1rem;
 		    top: 0.3rem;
 		    height: 0.8rem;
     		line-height: 0.8rem;
 		}
     </style>
 </head>
 <body>
 	<header class="aui-bar aui-bar-nav aui-border-b tab1" id="aui-header">
 		<a class="aui-pull-left aui-btn" tapmode onclick="closeWin();">
             <img src="../../icon/common/icon_header_return.png">
         </a>
         <div  id="common_title">
         确认订单
         </div>
        <!-- <a class="aui-pull-right aui-btn" onclick="openShareWindow()">
             <img src="../../icon/common/icon_share.png">
         </a> -->
     </header>
 </body>
 <script type="text/javascript" src="../../script/api.js"></script>
 <script type="text/javascript" src="../../script/jquery_3_2_1_min.js"></script>
 <script type="text/javascript" src="data:application/octet-stream;base64,DQovKioNCiAqIGFwcOivt+axguWcsOWdgA0KICovDQovL3ZhciBjb21tb25fdXJsID0gJ2h0dHA6Ly80Ny4xMTEuMjMuMTkyOjgxL2RsYUJhY2svJzsNCnZhciBjb21tb25fdXJsID0gJ2h0dHBzOi8vZGxhLm1vaGFuLXRlY2guY29tL2RsYUJhY2svJzsNCi8vdmFyIGNvbW1vbl91cmwgPSAnaHR0cDovLzQ3LjExMS4xNDUuMTk3OjgxODAvZGxhQmFjay8nOw0KLy92YXIgY29tbW9uX3VybCA9ICdodHRwOi8vMTkyLjE2OC4yLjE3OC8nOw0KDQovKiogDQogKiDmlofku7bor7fmsYLlnLDlnYANCiAqLw0KdmFyIGZpbGVfY29tbW9uX3VybCA9ICdodHRwczovL2ZpbGUubW9oYW4tdGVjaC5jb20vZmlsZUNlbnRlci8nOw0KLy92YXIgZmlsZV9jb21tb25fdXJsID0gJ2h0dHA6Ly80Ny4xMTEuMTQ1LjE5Nzo4NDgwL2ZpbGVDZW50ZXIvJzsNCg0KLyoqDQogKiDpmL/ph4xvc3NCdWNrZXQNCiAqLw0KLy92YXIgQWxpT3NzQnVja2V0ID0gJ2RyaXZpbmdob21ldGVzdCc7DQp2YXIgQWxpT3NzQnVja2V0ID0gJ2ppYWthb3poaWppYSc7DQoNCi8qKg0KICogb3Nz6LWE5rqQ6K+35rGC5Zyw5Z2ADQogKi8NCnZhciBmaWxlX2xvYWRfdXJsID0gZmlsZV9jb21tb25fdXJsICsgJ2FwaS9maWxlL2dldEZpbGVBdXRoP2J1Y2tldE5hbWU9JytBbGlPc3NCdWNrZXQrJyZmaWxlTmFtZT0nOw0KDQovKioNCiAqIOesrOS4ieaWueacjeWKoeWcsOWdgCDljbPkvb/mtYvor5XkuZ/opoHnlKjmraPlvI/lnLDlnYDvvIzkuI3nhLbnlJ/kuqfnjq/looPnmoTkurrohLjor4bliKvlsLFHR+S6hg0KICovDQp2YXIgdGhpcmRfdXJsID0gImh0dHBzOi8vdGhpcmRiYWNrLm1vaGFuLXRlY2guY29tL3RoaXJkQmFjay8iOw0KLy92YXIgdGhpcmRfdXJsID0gImh0dHA6Ly80Ny4xMTEuMTQ1LjE5Nzo4NTgwL3RoaXJkQmFjay8iOw0KLy92YXIgdGhpcmRfdXJsID0gImh0dHA6Ly8xOTIuMTY4LjIuMTc4Ojk5LyI7DQoNCi8v6K+35rGC5Zyw5Z2ADQp2YXIgdXJsID0gIiI7DQoNCi8v6K+35rGC5Y+C5pWwDQp2YXIgcGFyYW1zOw0KDQovKioNCiAqIGFqYXjlhbHlkIzosIPnlKgNCiAqLw0KZnVuY3Rpb24gYWpheF9SZXF1ZXN0KHVybCwgbWV0aG9kLCB0eXBlLCBwYXJhbXMsIGNhbGxCYWNrKSB7DQoJLy9sb2coJ+ivt+axguWPguaVsO+8micscGFyYW1zKTsNCglpZihtZXRob2QgPT0gImdldCIpew0KCQkvL2NvbnNvbGUubG9nKEJhc2U2NC5lbmNvZGUoSlNPTi5zdHJpbmdpZnkocGFyYW1zKSkpOw0KCQlhcGkuYWpheCh7DQoJCQl1cmwgOiBjb21tb25fdXJsICsgdXJsICsgJz9wYXJhbXM9JyArIEJhc2U2NC5lbmNvZGUoSlNPTi5zdHJpbmdpZnkocGFyYW1zKSksDQoJCQltZXRob2QgOiBtZXRob2QsDQoJCQl0YWc6dXJsLC8v5Li65pa55L6/77yM5YWo6YOo57uf5LiADQoJCQl0aW1lb3V0OjEwMCwNCgkJCWRhdGFUeXBlIDogdHlwZQ0KCQl9LCBmdW5jdGlvbihyZXQsIGVycikgew0KCQkJY2FsbEJhY2socmV0LCBlcnIpOw0KCQl9KTsNCgl9ZWxzZXsNCgkJYXBpLmFqYXgoew0KCQkJdXJsIDogY29tbW9uX3VybCArIHVybCwNCgkJCW1ldGhvZCA6IG1ldGhvZCwNCgkJCXRhZzp1cmwsLy/kuLrmlrnkvr/vvIzlhajpg6jnu5/kuIANCgkJCXRpbWVvdXQ6MzAsDQoJCQlkYXRhVHlwZSA6IHR5cGUsDQoJCQloZWFkZXJzIDogew0KCQkJCSJDb250ZW50LVR5cGUiIDogImFwcGxpY2F0aW9uL2pzb24iDQoJCQl9LA0KCQkJZGF0YTogew0KCQkJCWJvZHk6cGFyYW1zDQoJCQl9DQoJCX0sIGZ1bmN0aW9uKHJldCwgZXJyKSB7DQoJCQljYWxsQmFjayhyZXQsIGVycik7DQoJCX0pOw0KCX0NCn0NCg0KLyoqDQogKiDmlY/mhJ/or43ov4fmu6QgDQogKi8NCmZ1bmN0aW9uIHNlbnNpdGl2ZVdvcmRzKHBhcmFtLGZ1bmMpew0KICAJLy8gbG9nKCLmiJHkvKDov4fmnaXkuoYrKysrKysrKysrKysiKyBKU09OLnN0cmluZ2lmeShwYXJhbXMpKyIrKysrKysrKysrKyIpDQogIAkkLmFqYXgoew0KICAgIAl1cmw6dGhpcmRfdXJsICsgJ2FwaS90ZXN0RXhhbWluZS9nZXRUZXh0JywNCiAgICAJdHlwZToncG9zdCcsDQogICAgCWRhdGFUeXBlOidqc29uJywNCiAgICAJZGF0YTp7DQogICAgICAJCWNvbnRlbnQ6cGFyYW0NCiAgICAJfSwNCiAgICAJaGVhZGVyczp7DQogICAgICAJCSJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiDQoJCX0sDQogICAgCXN1Y2Nlc3M6ZnVuY3Rpb24ocmV0KXsNCiAgICAgIAkJZnVuYyhyZXQpDQogICAgCX0sDQoJCWVycm9yOmZ1bmN0aW9uKGVycil7DQoJCSAgCWZ1bmMoZXJyKQ0KICAgIAl9DQogIAl9KQ0KfQ0KDQovKioNCiAqIOWPkemAgemqjOivgeeggQ0KICovDQpmdW5jdGlvbiBzZW5kTWVzc2FnZShwYXJhbXMsZnVuYyl7DQoJYXBpLmFqYXgoew0KCQl1cmwgOiB0aGlyZF91cmwgKyAnYXBpL21zZycsDQoJCW1ldGhvZCA6ICdwb3N0JywNCgkJdGFnOnVybCwvL+S4uuaWueS+v++8jOWFqOmDqOe7n+S4gA0KCQl0aW1lb3V0OjMwLA0KCQlkYXRhVHlwZSA6ICdqc29uJywNCgkJaGVhZGVycyA6IHsNCgkJCSJDb250ZW50LVR5cGUiIDogImFwcGxpY2F0aW9uL2pzb24iDQoJCX0sDQoJCWRhdGE6IHsNCgkJCWJvZHk6cGFyYW1zDQoJCX0NCgl9LCBmdW5jdGlvbihyZXQsIGVycikgew0KCQlmdW5jKHJldCwgZXJyKTsNCgl9KTsNCn0NCg0KLyoqDQogKiDkuIrkvKDmlofku7YNCiAqLw0KZnVuY3Rpb24gZmlsZV91cGxvYWQodXJsLCBtZXRob2QsIHR5cGUsIGZpbGVQYXRoLCBwYXJhbSwgY2FsbEJhY2spew0KCWNvbnNvbGUubG9nKCfkuIrkvKDlnLDlnYB1cmwnK2RlY29kZVVSSUNvbXBvbmVudCh1cmwpKTsNCglhcGkuYWpheCh7DQoJCXVybCA6IGRlY29kZVVSSUNvbXBvbmVudCh1cmwpLA0KCQltZXRob2QgOiAnUFVUJywNCgkJdGltZW91dDo5MDAsDQoJCXJlcG9ydDp0cnVlLA0KCQljaGFyc2V0Oid1dGYtOCcsDQoJCWRhdGFUeXBlIDogdHlwZSwNCgkJcmV0dXJuQWxsOnRydWUsDQoJCWhlYWRlcnMgOiB7DQoJCQkiQ29udGVudC1UeXBlIiA6ICJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iDQoJCX0sDQoJCWRhdGE6IHsNCgkJCXN0cmVhbTpmaWxlUGF0aA0KCQl9DQoJfSwgZnVuY3Rpb24ocmV0LCBlcnIpIHsNCgkJY2FsbEJhY2socmV0LCBlcnIgLHBhcmFtKTsNCgl9KTsNCn0NCg0KLyoqDQogKiDojrflj5bmlofku7bkuIrkvKDmnYPpmZANCiAqLw0KZnVuY3Rpb24gZ2V0VXBsb2FkRmlsZVBvd2VyKHBhcmFtcyxjYWxsQmFjayl7DQoJYXBpLmFqYXgoew0KCQl1cmwgOiBmaWxlX2NvbW1vbl91cmwgKyAnYXBpL2ZpbGUvYXV0aD9idWNrZXROYW1lPScgKyBwYXJhbXMuYnVja2V0TmFtZSArICcmZmlsZU51bT0nICsgcGFyYW1zLmZpbGVOdW0gKyAnJmZpbGVUeXBlPScgKyBwYXJhbXMuZmlsZVR5cGUsDQoJCW1ldGhvZCA6ICdnZXQnLA0KCQl0aW1lb3V0OjMwLA0KCQlkYXRhVHlwZSA6ICdqc29uJw0KCX0sIGZ1bmN0aW9uKHJldCwgZXJyKSB7DQoJCWNhbGxCYWNrKHJldCwgZXJyKTsNCgl9KTsNCn0NCg0KLyoqDQogKiDojrflj5blrZflhbjooagNCiAqLw0KZnVuY3Rpb24gZ2V0RGljdGlvbmFyeShjb2RlLGZ1bmMpew0KCWRlZmF1bHRsb2FkKCk7DQoJdXJsID0gJ2FwaS9kaWN0aW9uYXJ5JzsvL+iOt+WPluaAp+WIq+S/oeaBr++8jOmAmui/h+Wtl+WFuOihqA0KCXBhcmFtcyA9IHsNCgkJY29kZXM6Y29kZQ0KCX0NCglhamF4X1JlcXVlc3QodXJsLCAnZ2V0JywgJ2pzb24nLCBwYXJhbXMsIGZ1bmN0aW9uKHJldCxlcnIpew0KCQljbG9zZWRlZmF1bHRsb2FkKCk7DQoJCWZ1bmMocmV0LGVycik7DQoJfSk7DQp9DQoNCi8qKg0KICog6LCD55So5YW25LuW6aG16Z2i55qE5pa55rOVDQogKi8NCmZ1bmN0aW9uIGVzY19mdW5jdGlvbihuYW1lLGZyYW1lTmFtZSxqc2Z1bil7DQoJYXBpLmV4ZWNTY3JpcHQoew0KICAgICAgICBuYW1lOiBuYW1lLA0KICAgICAgICBmcmFtZU5hbWU6IGZyYW1lTmFtZSwNCiAgICAgICAgc2NyaXB0OiBqc2Z1bg0KICAgIH0pOw0KfQ0KDQovKioNCiAqIOaJk+W8gOaWsOmhtemdoumAmueUqA0KICovDQpmdW5jdGlvbiBjb21tb25PcGVuV2luKG5hbWUsZGF0YSl7DQogICBhcGkub3Blbldpbih7DQogICAgICAgbmFtZTogbmFtZSwNCiAgICAgICB1cmw6ICcuLycrbmFtZSsnLmh0bWwnLA0KICAgICAgIHNsaWRCYWNrRW5hYmxlZDonZmFsc2UnLA0KICAgICAgIHZTY3JvbGxCYXJFbmFibGVkOidmYWxzZScsDQogICAgICAgaFNjcm9sbEJhckVuYWJsZWQ6J2ZhbHNlJywNCiAgICAgICByZWxvYWQ6dHJ1ZSwNCiAgICAgICB1c2VXS1dlYlZpZXc6ZmFsc2UsDQogICAgICAgcGFnZVBhcmFtOiB7DQogICAgICAgICAgIGRhdGE6ZGF0YQ0KICAgICAgIH0NCiAgIH0pOw0KfQ0KDQovKioNCiAqIOaJk+W8gOinhumikeaSreaUviANCiAqLw0KZnVuY3Rpb24gb3BlblBsYXllcihwYXJhbXMpew0KCWFwaS5vcGVuRnJhbWUoew0KICAgICAgICBuYW1lOiAnY29tbW9uX3ZpZGVvX2ZybScsDQogICAgICAgIHVybDogJy4uL2NvbW1vbi9jb21tb25fdmlkZW9fZnJtLmh0bWwnLA0KICAgICAgICBzbGlkQmFja0VuYWJsZWQ6J2ZhbHNlJywNCiAgICAgICAgdlNjcm9sbEJhckVuYWJsZWQ6J2ZhbHNlJywNCiAgICAgICAgaFNjcm9sbEJhckVuYWJsZWQ6J2ZhbHNlJywNCiAgICAgICAgcmVsb2FkOnRydWUsDQogICAgICAgIHBhZ2VQYXJhbTpwYXJhbXMNCiAgICB9KTsNCn0NCg0KLyoqDQogKiDns7vnu5/oh6rluKbliqDovb0NCiAqLw0KZnVuY3Rpb24gZGVmYXVsdGxvYWQobXNnKXsNCiAgIGFwaS5zaG93UHJvZ3Jlc3Moew0KICAgICAgIHRpdGxlOiAnJywNCiAgICAgICB0ZXh0OiBtc2cgIT0gdW5kZWZpbmVkP21zZzon5Yqq5Yqb5Yqg6L295LitLi4uJywNCiAgICAgICBtb2RhbDogdHJ1ZQ0KICAgfSk7DQp9DQoNCi8qKg0KICog5YWz6Zet57O757uf6Ieq5bim5Yqg6L29DQogKi8NCmZ1bmN0aW9uIGNsb3NlZGVmYXVsdGxvYWQoKXsNCglhcGkuaGlkZVByb2dyZXNzKCk7DQp9DQoNCi8qKg0KICog5omT5byAZnJhbWXpgJrnlKgNCiAqLw0KZnVuY3Rpb24gb3BlbkZyYW1lQ29tbW9uKGZybU5hbWUsZGF0YSx5LGgsaXNCb3VuY2VzKXsNCglhcGkub3BlbkZyYW1lKHsNCiAgICAgICAgbmFtZTogZnJtTmFtZSwNCiAgICAgICAgdXJsOiAnLi8nICsgZnJtTmFtZSArICcuaHRtbCcsDQogICAgICAgIGJnQ29sb3I6JyNlZmVmZjQnLA0KICAgICAgICBhbmltYXRpb246ew0KICAgICAgICAJdHlwZToibm9uZSIsICAgICAgICAgICAgICAgIC8v5Yqo55S757G75Z6L77yI6K+m6KeB5Yqo55S757G75Z6L5bi46YeP77yJDQoJCSAgICBzdWJUeXBlOiJmcm9tX3JpZ2h0IiwgICAgICAgLy/liqjnlLvlrZDnsbvlnovvvIjor6bop4HliqjnlLvlrZDnsbvlnovluLjph4/vvIkNCgkJICAgIGR1cmF0aW9uOjMwMA0KICAgICAgICB9LA0KICAgICAgICByZWN0OiB7DQogICAgICAgICAgICB4OiAwLA0KICAgICAgICAgICAgeTogeSwNCiAgICAgICAgICAgIHc6ICdhdXRvJywNCiAgICAgICAgICAgIGg6IGgNCiAgICAgICAgfSwNCiAgICAgICAgYm91bmNlczogaXNCb3VuY2VzLA0KICAgICAgICBwYWdlUGFyYW06ZGF0YSwNCiAgICAgICAgc29mdElucHV0QmFyRW5hYmxlZDp0cnVlLA0KICAgICAgICBzb2Z0SW5wdXRNb2RlOidyZXNpemUnDQogICAgfSk7DQp9DQoNCi8qKg0KICogZnJhbWXlt6bnp7vliqjmu5Hlh7oNCiAqLw0KZnVuY3Rpb24gZnJhbWVMZWZ0T3V0KGZybU5hbWUpew0KCWFwaS5hbmltYXRpb24oew0KCQluYW1lOmZybU5hbWUsDQoJICAgIGRlbGF5OiAwLA0KCSAgICBkdXJhdGlvbjogMzAwLA0KCSAgICBjdXJ2ZTogJ2xpbmVhcicsDQoJICAgIHJlcGVhdENvdW50OiAwLA0KCSAgICBhdXRvcmV2ZXJzZTogZmFsc2UsDQoJICAgIHRyYW5zbGF0aW9uOiB7DQoJICAgICAgICB4OiAtYXBpLmZyYW1lV2lkdGgsDQoJICAgICAgICB5OiAwLA0KCSAgICAgICAgejogMA0KCSAgICB9DQoJfSwgZnVuY3Rpb24ocmV0LCBlcnIpIHsNCgkgICAgYXBpLmNsb3NlRnJhbWUoew0KCSAgICAJbmFtZTpmcm1OYW1lDQogICAgICAgIH0pOw0KCX0pOw0KfQ0KLyoqDQogKiBmcmFtZeWPs+enu+WKqOa7keWHug0KICovDQpmdW5jdGlvbiBmcmFtZVJpZ2h0T3V0KGZybU5hbWUpew0KCWFwaS5hbmltYXRpb24oew0KCQluYW1lOmZybU5hbWUsDQoJICAgIGRlbGF5OiAwLA0KCSAgICBkdXJhdGlvbjogMzAwLA0KCSAgICBjdXJ2ZTogJ2xpbmVhcicsDQoJICAgIHJlcGVhdENvdW50OiAwLA0KCSAgICBhdXRvcmV2ZXJzZTogZmFsc2UsDQoJICAgIHRyYW5zbGF0aW9uOiB7DQoJICAgICAgICB4OiBhcGkuZnJhbWVXaWR0aCwNCgkgICAgICAgIHk6IDAsDQoJICAgICAgICB6OiAwDQoJICAgIH0NCgl9LCBmdW5jdGlvbihyZXQsIGVycikgew0KCSAgICBhcGkuY2xvc2VGcmFtZSh7DQoJICAgIAluYW1lOmZybU5hbWUNCiAgICAgICAgfSk7DQoJfSk7DQp9DQoNCi8qKg0KICog5omT5byAZnJhbWXvvIjku47lj7PlvoDlt6bov5vlhaXvvIkNCiAqLw0KZnVuY3Rpb24gb3BlbkZyYW1lRnJvbVJpZ2h0KGZybU5hbWUsZGF0YSx5LGgpew0KCWFwaS5vcGVuRnJhbWUoew0KICAgICAgICBuYW1lOiBmcm1OYW1lLA0KICAgICAgICB1cmw6ICcuLycgKyBmcm1OYW1lICsgJy5odG1sJywNCiAgICAgICAgYmdDb2xvcjonI2VmZWZmNCcsDQogICAgICAgIGFuaW1hdGlvbjp7DQogICAgICAgIAl0eXBlOiJwdXNoIiwgICAgICAgICAgICAgICAgLy/liqjnlLvnsbvlnovvvIjor6bop4HliqjnlLvnsbvlnovluLjph4/vvIkNCgkJICAgIHN1YlR5cGU6ImZyb21fcmlnaHQiLCAgICAgICAvL+WKqOeUu+WtkOexu+Wei++8iOivpuingeWKqOeUu+WtkOexu+Wei+W4uOmHj++8iQ0KCQkgICAgZHVyYXRpb246MzAwDQogICAgICAgIH0sDQogICAgICAgIHJlY3Q6IHsNCiAgICAgICAgICAgIHg6IDAsDQogICAgICAgICAgICB5OiB5LA0KICAgICAgICAgICAgdzogJ2F1dG8nLA0KICAgICAgICAgICAgaDogaA0KICAgICAgICB9LA0KICAgICAgICBib3VuY2VzOiBmYWxzZSwNCiAgICAgICAgcGFnZVBhcmFtOmRhdGEsDQogICAgICAgIHNvZnRJbnB1dEJhckVuYWJsZWQ6dHJ1ZSwNCiAgICAgICAgc29mdElucHV0TW9kZToncmVzaXplJw0KICAgIH0pOw0KfQ0KDQovKioNCiAqIOW8ueeql+exu2ZyYW1lDQogKi8NCmZ1bmN0aW9uIG9wZW5GcmFtZUFsZXJ0KGZybU5hbWUsZGF0YSx5LGgpew0KCWFwaS5vcGVuRnJhbWUoew0KICAgICAgICBuYW1lOiBmcm1OYW1lLA0KICAgICAgICB1cmw6ICcuLycgKyBmcm1OYW1lICsgJy5odG1sJywNCiAgICAgICAgYmdDb2xvcjogJ3JnYmEoMCwwLDAsMC42KScsDQogICAgICAgIHJlY3Q6IHsNCiAgICAgICAgICAgIHg6IDAsDQogICAgICAgICAgICB5OiB5LA0KICAgICAgICAgICAgdzogJ2F1dG8nLA0KICAgICAgICAgICAgaDogaA0KICAgICAgICB9LA0KICAgICAgICBib3VuY2VzOiBmYWxzZSwNCiAgICAgICAgcGFnZVBhcmFtOmRhdGEsDQogICAgICAgIHNvZnRJbnB1dEJhckVuYWJsZWQ6dHJ1ZSwNCiAgICAgICAgc29mdElucHV0TW9kZToncmVzaXplJw0KICAgIH0pOw0KfQ0KDQovKioNCiAqIOaJk+W8gOiAg+ivleaKpeWQjemhtemdog0KICovDQpmdW5jdGlvbiBvcGVuRXhhbVJlZ2lzdHJhY3Rpb24odHlwZSl7DQoJaWYoaXNsb2dpbigpKXsNCgkJYXBpLm9wZW5EcmF3ZXJMYXlvdXQoew0KCQkgICAgbmFtZTogJ2NvbW1vbl9leGFtX3NpZ25fdXBfd2luJywNCgkJICAgIHVybDogJy4uL2NvbW1vbi9jb21tb25fZXhhbV9zaWduX3VwX3dpbi5odG1sJywNCgkJICAgIHNsaWRCYWNrRW5hYmxlZDondHJ1ZScsDQoJCSAgICB2U2Nyb2xsQmFyRW5hYmxlZDonZmFsc2UnLA0KCSAgCQloU2Nyb2xsQmFyRW5hYmxlZDonZmFsc2UnLA0KCSAgCQlyZWxvYWQ6dHJ1ZSwNCgkJICAgIHBhZ2VQYXJhbTogew0KCQkgICAgCXR5cGU6dHlwZQ0KCQkgICAgfSwNCgkJICAgIGFuaW1hdGlvbjogew0KCQkgICAgICAgIHR5cGU6ICdwdXNoJywNCgkJICAgICAgICBzdWJUeXBlOiJmcm9tX3JpZ2h0IiwNCgkJCQlkdXJhdGlvbjozMDANCgkJICAgIH0sDQoJCSAgICByaWdodFBhbmU6IHsNCgkJICAgICAgICBuYW1lOiAnbGVmdFBhbmUnLA0KCQkgICAgICAgIHVybDogJy4uL2NvbW1vbi9jb21tb25fZXhhbV9yb29tX2xpc3Rfd2luLmh0bWwnLA0KCQkgICAgICAgIHZTY3JvbGxCYXJFbmFibGVkOmZhbHNlLA0KCQkgICAgICAgIGhTY3JvbGxCYXJFbmFibGVkOmZhbHNlLA0KCQkgICAgICAgIGJvdW5jZXM6ZmFsc2UsDQoJCSAgICAgICAgcGFnZVBhcmFtOnsNCgkJICAgICAgICAJZGF0YTp0eXBlDQoJCSAgICAgICAgfQ0KCQkgICAgfQ0KCQl9KTsNCgl9ZWxzZXsNCgkJb3BlbkxvZ2luSHRtbCgpOw0KCX0NCn0NCg0KLy/miZPlvIDliIbkuqvpobXpnaINCi8vc2hhcmVEYXRh5b+F5aGr6aG577yaDQovL+KRoOaWueazleiwg+eUqOaJgOWcqOeahHdpbk5hbWUNCmZ1bmN0aW9uIG9wZW5TaGFyZShzaGFyZURhdGEpew0KCWFwaS5vcGVuRnJhbWUoew0KICAgICAgICBuYW1lOiAnY29tbW9uX3NoYXJlX3NoYWRvdycsDQogICAgICAgIHVybDogJy4uL2NvbW1vbi9jb21tb25fc2hhcmVfc2hhZG93Lmh0bWwnLA0KICAgICAgICBiZ0NvbG9yOiAncmdiYSgwLDAsMCwwLjMpJywNCiAgICAgICAgcmVjdDogew0KICAgICAgICAgICAgeDogMCwNCiAgICAgICAgICAgIHk6IDAsDQogICAgICAgICAgICB3OiAnYXV0bycsDQogICAgICAgICAgICBoOiBhcGkud2luSGVpZ2h0DQogICAgICAgIH0sDQogICAgICAgIGJvdW5jZXM6IGZhbHNlLA0KICAgICAgICBzb2Z0SW5wdXRCYXJFbmFibGVkOnRydWUsDQogICAgICAgIHNvZnRJbnB1dE1vZGU6J3Jlc2l6ZScsDQogICAgICAgIHBhZ2VQYXJhbTpzaGFyZURhdGENCiAgICB9KTsNCn0NCg0KLyoqDQogKiDmiZPlvIDnrb7nuqbpobXpnaLlhbHpgJoNCiAqLw0KZnVuY3Rpb24gb3BlblNpZ25Db250cmFjdChwYXJhbXMpew0KCWFwaS5vcGVuV2luKHsNCiAgICAgICBuYW1lOiAnY29tbW9uX3NpZ25fb25saW5lX3dpbicsDQogICAgICAgdXJsOiAnLi4vY29tbW9uL2NvbW1vbl9zaWduX29ubGluZV93aW4uaHRtbCcsDQogICAgICAgc2xpZEJhY2tFbmFibGVkOidmYWxzZScsDQogICAgICAgdlNjcm9sbEJhckVuYWJsZWQ6J2ZhbHNlJywNCiAgICAgICBoU2Nyb2xsQmFyRW5hYmxlZDonZmFsc2UnLA0KICAgICAgIHJlbG9hZDp0cnVlLA0KICAgICAgIHBhZ2VQYXJhbTogcGFyYW1zDQogICB9KTsNCn0NCg0KLyoqDQogKiDkuIvmi4nliLfmlrDlhbHpgJrmlrnms5UNCiAqLw0KZnVuY3Rpb24gZ29SZWZyYXNoKGxvYWRBbmltSW50ZXJ2YWwsYmdDb2xvcixzdGFydFBpY3Msc3RvcFBpY3MsZnVuYyl7DQoJaWYoc3RhcnRQaWNzID09IG51bGwpew0KCQlzdGFydFBpY3MgPSBbXTsNCgkJZm9yKHZhciBpPTE7aTw9MjU7aSsrKXsNCgkJCXN0YXJ0UGljcy5wdXNoKCd3aWRnZXQ6Ly9yZXMvc3RhcnQvc3RhcnQnK2krJy5wbmcnKTsNCgkJfQ0KCX0NCglpZihzdG9wUGljcyA9PSBudWxsKXsNCgkJc3RvcFBpY3MgPSBbXTsNCgkJZm9yKHZhciBpPTE7aTw9OTc7aSsrKXsNCgkJCXN0b3BQaWNzLnB1c2goJ3dpZGdldDovL3Jlcy9zdG9wL2xvYWQnK2krJy5wbmcnKTsNCgkJfQ0KCX0NCglhcGkuc2V0Q3VzdG9tUmVmcmVzaEhlYWRlckluZm8oew0KCSAgICBiZ0NvbG9yOiBiZ0NvbG9yLA0KCSAgICBpc1NjYWxlOiB0cnVlLA0KCSAgICBsb2FkQW5pbUludGVydmFsIDogbG9hZEFuaW1JbnRlcnZhbCwNCgkgICAgaW1hZ2U6IHsNCgkgICAgICAgIHB1bGw6IHN0YXJ0UGljcywNCgkgICAgICAgIGxvYWQ6IHN0b3BQaWNzDQoJICAgIH0NCgl9LCBmdW5jdGlvbigpIHsNCgkgICAgZnVuYygpOw0KCX0pOw0KfQ0KDQovKioNCiAqIOS4iuaLieWKoOi9vemAmueUqOaWueazlQ0KICovDQpmdW5jdGlvbiBnb0xvYWQoZnVuYyl7DQoJYXBpLmFkZEV2ZW50TGlzdGVuZXIoew0KCQluYW1lOidzY3JvbGx0b2JvdHRvbScsDQoJCWV4dHJhOnsNCgkgICAgICAgIHRocmVzaG9sZDoyMC8v6K6+572u6Led56a75bqV6YOo5aSa5bCR6Led56a75pe26Kem5Y+R77yM6buY6K6k5YC85Li6MO+8jOaVsOWtl+exu+Weiw0KCSAgICB9DQoJfSwgZnVuY3Rpb24ocmV0LCBlcnIpew0KCQlmdW5jKHJldCxlcnIpOw0KCX0pOw0KfQ0KDQovL+aJk+W8gOivhOiuuumhtemdog0KLy9jb21tZW50RGF0YeW/heWhq+mhue+8mg0KZnVuY3Rpb24gb3BlbkNvbW1lbnQoY29tbWVudERhdGEpew0KCWFwaS5vcGVuRnJhbWUoew0KICAgICAgICBuYW1lOiAnY29tbW9uX2NvbW1lbnRfc2hhZG93JywNCiAgICAgICAgdXJsOiAnLi4vY29tbW9uL2NvbW1vbl9jb21tZW50X3NoYWRvdy5odG1sJywNCiAgICAgICAgYmdDb2xvcjogJ3JnYmEoMCwwLDAsMC4zKScsDQogICAgICAgIHJlY3Q6IHsNCiAgICAgICAgICAgIHg6IDAsDQogICAgICAgICAgICB5OiAwLA0KICAgICAgICAgICAgdzogJ2F1dG8nLA0KICAgICAgICAgICAgaDogYXBpLndpbkhlaWdodA0KICAgICAgICB9LA0KICAgICAgICBib3VuY2VzOiBmYWxzZSwNCiAgICAgICAgc29mdElucHV0QmFyRW5hYmxlZDp0cnVlLA0KICAgICAgICBzb2Z0SW5wdXRNb2RlOidyZXNpemUnLA0KICAgICAgICBwYWdlUGFyYW06Y29tbWVudERhdGENCiAgICB9KTsNCn0NCg0KLyoqDQogKiDmiZPlvIBsb2Fk5YWx6YCaDQogKi8NCmZ1bmN0aW9uIG9wZW5fbG9hZChtc2cpew0KCWFwaS5vcGVuRnJhbWUoew0KICAgICAgICBuYW1lOiAnY29tbW9uX3Byb2dyZXNzX2ZybScsDQogICAgICAgIHVybDogJy4uL2NvbW1vbi9jb21tb25fcHJvZ3Jlc3NfZnJtLmh0bWwnLA0KICAgICAgICBiZ0NvbG9yOidyZ2JhKDI1NSwyNTUsMjU1LDAuOCknLA0KICAgICAgICByZWN0OiB7DQogICAgICAgICAgICB4OiAwLA0KICAgICAgICAgICAgeTogMCwNCiAgICAgICAgICAgIHc6IGFwaS53aW5XaWR0aCwNCiAgICAgICAgICAgIGg6IGFwaS53aW5IZWlnaHQNCiAgICAgICAgfSwNCiAgICAgICAgYm91bmNlczogZmFsc2UsDQogICAgICAgIHBhZ2VQYXJhbTp7DQogICAgICAgIAltc2c6bXNnDQogICAgICAgIH0sDQogICAgICAgIHNvZnRJbnB1dEJhckVuYWJsZWQ6dHJ1ZSwNCiAgICAgICAgc29mdElucHV0TW9kZToncmVzaXplJw0KICAgIH0pOw0KfQ0KDQovKioNCiAqIOWtkOmhtemdouaJk+W8gGxvYWQNCiAqLw0KZnVuY3Rpb24gb3Blbl9sb2FkX2xvd2VyKG1zZyl7DQoJYXBpLm9wZW5GcmFtZSh7DQogICAgICAgIG5hbWU6ICdjb21tb25fcHJvZ3Jlc3NfZnJtJywNCiAgICAgICAgdXJsOiAnLi4vLi4vY29tbW9uL2NvbW1vbl9wcm9ncmVzc19mcm0uaHRtbCcsDQogICAgICAgIGJnQ29sb3I6J3JnYmEoMjU1LDI1NSwyNTUsMC44KScsDQogICAgICAgIHJlY3Q6IHsNCiAgICAgICAgICAgIHg6IDAsDQogICAgICAgICAgICB5OiAwLA0KICAgICAgICAgICAgdzogYXBpLndpbldpZHRoLA0KICAgICAgICAgICAgaDogYXBpLndpbkhlaWdodA0KICAgICAgICB9LA0KICAgICAgICBib3VuY2VzOiBmYWxzZSwNCiAgICAgICAgcGFnZVBhcmFtOnsNCiAgICAgICAgCW1zZzptc2cNCiAgICAgICAgfSwNCiAgICAgICAgc29mdElucHV0QmFyRW5hYmxlZDp0cnVlLA0KICAgICAgICBzb2Z0SW5wdXRNb2RlOidyZXNpemUnDQogICAgfSk7DQp9DQoNCi8qKg0KICog54i26aG16Z2i5omT5byAbG9hZA0KICovDQpmdW5jdGlvbiBvcGVuX2xvYWRfdXAobXNnKXsNCglhcGkub3BlbkZyYW1lKHsNCiAgICAgICAgbmFtZTogJ2NvbW1vbl9wcm9ncmVzc19mcm0nLA0KICAgICAgICB1cmw6ICcuL2NvbW1vbi9jb21tb25fcHJvZ3Jlc3NfZnJtLmh0bWwnLA0KICAgICAgICBiZ0NvbG9yOidyZ2JhKDI1NSwyNTUsMjU1LDAuOCknLA0KICAgICAgICByZWN0OiB7DQogICAgICAgICAgICB4OiAwLA0KICAgICAgICAgICAgeTogMCwNCiAgICAgICAgICAgIHc6IGFwaS53aW5XaWR0aCwNCiAgICAgICAgICAgIGg6IGFwaS53aW5IZWlnaHQNCiAgICAgICAgfSwNCiAgICAgICAgYm91bmNlczogZmFsc2UsDQogICAgICAgIHBhZ2VQYXJhbTp7DQogICAgICAgIAltc2c6bXNnDQogICAgICAgIH0sDQogICAgICAgIHNvZnRJbnB1dEJhckVuYWJsZWQ6dHJ1ZSwNCiAgICAgICAgc29mdElucHV0TW9kZToncmVzaXplJw0KICAgIH0pOw0KfQ0KDQovKioNCiAqIOWFs+mXrWxvYWTlhbHpgJoNCiAqLw0KZnVuY3Rpb24gY2xvc2VfbG9hZCgpew0KCWFwaS5jbG9zZUZyYW1lKHsNCgkJbmFtZTonY29tbW9uX3Byb2dyZXNzX2ZybScKICAgIH0pOw0KfQ0KDQovL+aJk+W8gOmAmueUqOW8ueWHuuahhg0KLy90aXRsZeagh+mimCBjb250ZW505YaF5a65IHN1cmVCdXR0b27noa7orqTmjInpkq7mloflrZcgc3VyZUZ1bmPnoa7lrprmlrnms5UgY2FuY2VsRnVuY+WPlua2iOaWueazlSBjYW5jZWxCdXR0b27lj5bmtojmjInpkq7mloflrZcgcGFyYW1z6aKd5aSW5Y+C5pWw77yM5rKh5pyJ5b+F6aG75LygbnVsbA0KZnVuY3Rpb24gb3Blbk1lc3NhZ2UodGl0bGUsY29udGVudCxzdXJlQnV0dG9uLGNhbmNlbEJ1dHRvbixzdXJlRnVuYyxjYW5jZWxGdW5jLHBhcmFtcyl7DQoJYXBpLm9wZW5GcmFtZSh7DQogICAgICAgIG5hbWU6ICdjb21tb25fYWxlcnQnLA0KICAgICAgICB1cmw6ICcuLi9jb21tb24vY29tbW9uX2FsZXJ0Lmh0bWwnLA0KICAgICAgICBiZ0NvbG9yOiAncmdiYSgwLDAsMCwwLjQpJywNCiAgICAgICAgcmVjdDogew0KICAgICAgICAgICAgeDogMCwNCiAgICAgICAgICAgIHk6IDAsDQogICAgICAgICAgICB3OiAnYXV0bycsDQogICAgICAgICAgICBoOiBhcGkud2luSGVpZ2h0DQogICAgICAgIH0sDQogICAgICAgIGJvdW5jZXM6IGZhbHNlLA0KICAgICAgICBwYWdlUGFyYW06ew0KICAgICAgICAJdGl0bGU6dGl0bGUsDQogICAgICAgIAljb250ZW50OmNvbnRlbnQsDQogICAgICAgIAlzdXJlQnV0dG9uOnN1cmVCdXR0b24sDQogICAgICAgIAlzdXJlRnVuYzpzdXJlRnVuYywNCiAgICAgICAgCWNhbmNlbEJ1dHRvbjpjYW5jZWxCdXR0b24sDQogICAgICAgIAljYW5jZWxGdW5jOmNhbmNlbEZ1bmMsDQogICAgICAgIAl3aW5OYW1lOmFwaS53aW5OYW1lLA0KICAgICAgICAJZnJhbWVOYW1lOmFwaS5mcmFtZU5hbWUsDQogICAgICAgIAlwYXJhbXM6cGFyYW1zDQogICAgICAgIH0sDQogICAgICAgIHNvZnRJbnB1dEJhckVuYWJsZWQ6dHJ1ZSwNCiAgICAgICAgc29mdElucHV0TW9kZToncmVzaXplJw0KICAgIH0pOw0KfQ0KDQovKioNCiAqIOmAmueUqOivtOaYjuaWh+Wtl+ahhg0KICovDQpmdW5jdGlvbiBvcGVuQ29tbW9uTXNnKG1zZyl7DQoJYXBpLm9wZW5GcmFtZSh7DQogICAgICAgIG5hbWU6ICdjb21tb25fbXNnJywNCiAgICAgICAgdXJsOiAnLi4vY29tbW9uL2NvbW1vbl9tc2cuaHRtbCcsDQogICAgICAgIGJnQ29sb3I6ICdyZ2JhKDAsMCwwLDAuNiknLA0KICAgICAgICByZWN0OiB7DQogICAgICAgICAgICB4OiAwLA0KICAgICAgICAgICAgeTogMCwNCiAgICAgICAgICAgIHc6ICdhdXRvJywNCiAgICAgICAgICAgIGg6IGFwaS53aW5IZWlnaHQNCiAgICAgICAgfSwNCiAgICAgICAgYm91bmNlczogZmFsc2UsDQogICAgICAgIHBhZ2VQYXJhbTp7DQogICAgICAgIAltc2c6bXNnDQogICAgICAgIH0sDQogICAgICAgIHNvZnRJbnB1dEJhckVuYWJsZWQ6dHJ1ZSwNCiAgICAgICAgc29mdElucHV0TW9kZToncmVzaXplJw0KICAgIH0pOw0KfQ0KDQovL+aJk+W8gOS4vuaKpQ0KLy9mb3J1bUlk5b+F5aGrDQpmdW5jdGlvbiBvcGVuUmVwb3J0KGZvcnVtSWQpew0KICAJYXBpLm9wZW5GcmFtZSh7DQogICAgICAgIG5hbWU6ICdjb21tb25fcmVwb3J0X3NoYWRvdycsDQogICAgICAgIHVybDogJy4uL2NvbW1vbi9jb21tb25fcmVwb3J0X3NoYWRvdy5odG1sJywNCiAgICAgICAgYmdDb2xvcjogJ3JnYmEoMCwwLDAsMC4zKScsDQogICAgICAgIHJlY3Q6IHsNCiAgICAgICAgICAgIHg6IDAsDQogICAgICAgICAgICB5OiAwLA0KICAgICAgICAgICAgdzogJ2F1dG8nLA0KICAgICAgICAgICAgaDogYXBpLndpbkhlaWdodA0KICAgICAgICB9LA0KICAgICAgICBib3VuY2VzOiBmYWxzZSwNCiAgICAgICAgc29mdElucHV0QmFyRW5hYmxlZDp0cnVlLA0KICAgICAgICBzb2Z0SW5wdXRNb2RlOidyZXNpemUnLA0KICAgICAgICBwYWdlUGFyYW06Zm9ydW1JZA0KICAgIH0pOw0KfQ0KDQovKioNCiAqIOWIoOmZpOS9k+ajgOW9leWItuinhumikeS7peWPiuWBmumimOS/oeaBrw0KICovDQpmdW5jdGlvbiBkZWxldGVFeGFtVmlkZW8ob3JkZXJJZCxmdW5jKXsNCgl2YXIgY2FjaGVfYnlfYWNjb3VudCA9ICRhcGkuZ2V0U3RvcmFnZSgnY2FjaGVfYnlfYWNjb3VudCcpOw0KCWNhY2hlX2J5X2FjY291bnRbJ2V4YW1fcmVzdWx0JytvcmRlcklkXSA9IG51bGw7DQoJJGFwaS5zZXRTdG9yYWdlKCJjYWNoZV9ieV9hY2NvdW50IixjYWNoZV9ieV9hY2NvdW50KTsNCglmcy5leGlzdCh7DQoJICAgIHBhdGg6ICdmczovL3ZpZGVvUmVjb3JkZXIvZXhhbVZpZGVvJytvcmRlcklkKycubXA0Jw0KCX0sIGZ1bmN0aW9uKHJldCwgZXJyKSB7DQoJICAgIGlmIChyZXQuZXhpc3QpIHsNCgkgICAgICAgIGNvbnNvbGUubG9nKCLlrZjlnKjkvZPmo4Dop4bpopHmlofku7bvvIzov5vooYzliKDpmaQiKTsNCgkJCWZzLnJtZGlyKHsNCgkJCSAgICBwYXRoOiAnZnM6Ly92aWRlb1JlY29yZGVyL2V4YW1WaWRlbycrb3JkZXJJZCsnLm1wNCcNCgkJCX0sIGZ1bmN0aW9uKHJldCwgZXJyKSB7DQoJCQkgICAgaWYgKHJldC5zdGF0dXMpIHsNCgkJCSAgICAgICAgY29uc29sZS5sb2coIuWIoOmZpOS9k+ajgOW9leWItuinhumikeaIkOWKnyIpOw0KCQkJICAgIH0gZWxzZSB7DQoJCQkgICAgICAgIGFsZXJ0X21zZygi5Yig6Zmk5L2T5qOA5b2V5Yi26KeG6aKR5aSx6LSlIitKU09OLnN0cmluZ2lmeShlcnIpKTsNCgkJCSAgICB9DQoJCSAgICAgICAgZnVuYygpOw0KCQkJfSk7DQoJICAgIH1lbHNlew0KCSAgICAJZnVuYygpOw0KCSAgICB9DQoJfSk7DQp9DQoNCi8qKg0KICog5LiK5Lyg5L2T5qOA6KeG6aKR5Lul5Y+K5YGa6aKY5L+h5oGv5YWx6YCa5pa55rOVDQogKi8NCmZ1bmN0aW9uIHVwbG9hZFZpZGVvRXhhbShvcmRlcklkLHdpbk5hbWUsanNmdW4pew0KCXZhciBleGFtUmVzdWx0ID0gJGFwaS5nZXRTdG9yYWdlKCdjYWNoZV9ieV9hY2NvdW50JylbJ2V4YW1fcmVzdWx0JytvcmRlcklkXTsNCglpZihleGFtUmVzdWx0ID09IG51bGwpew0KCQlhbGVydF9tc2coJ+acrOWcsOaXoOaVsOaNricpOw0KCX1lbHNlew0KCQlvcGVuX2xvYWQoKTsvL+aJk+W8gOS4iuS8oOi/m+W6puWKoOi9vQ0KCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7DQoJCQljb25zb2xlLmxvZygn6I635Y+W5b6X5Yiw55qE5LiK5Lyg5L2T5qOA5L+h5oGvJytKU09OLnN0cmluZ2lmeShleGFtUmVzdWx0KSk7DQoJCQlwYXJhbXMgPSB7DQoJCQkJYnVja2V0TmFtZTpBbGlPc3NCdWNrZXQsDQoJCQkJZmlsZU51bToxLA0KCQkJCWZpbGVUeXBlOidsZWFybmVyQXBwL2V4YW1pbmF0aW9uL3ZpZGVvJw0KCQkJfQ0KCQkJY29uc29sZS5sb2coJ+i/m+WFpeivu+WPluinhumikeaTjeS9nCcpOw0KCQkJLy/ojrflj5bmlofku7bkuIrkvKDmnYPpmZANCgkJCXZhciBmaWxlUGF0aCA9IGFwaS5mc0RpciArICcvdmlkZW9SZWNvcmRlci9leGFtVmlkZW8nK29yZGVySWQrJy5tcDQnOw0KCQkJY29uc29sZS5sb2coJ2ZpbGVQYXRoJytmaWxlUGF0aCk7DQoJCQlmcy5leGlzdCh7DQoJCSAgICAgICAgcGF0aDpmaWxlUGF0aA0KCQkgICAgfSxmdW5jdGlvbihyZXQsZXJyKXsNCgkJICAgIAlpZihyZXQuZXhpc3Qpew0KCQkgICAgCQl2YXIgaXNsb2FkRmxhZyA9IDA7Ly/moIforrDkvY0gaXNsb2Fk5Luj6KGo5piv5ZCm5LiK5Lyg77yMMOS7o+ihqOacquS4iuS8oO+8jDHku6PooajmjZXmjYnkuIrkvKDvvIwy5Luj6KGo5LiO6Zi/6YeM5LqR5bu656uL6L+e5o6l77yMM+S7o+ihqOS4iuS8oOWujOaIkA0KCQkJCQkJZ2V0VXBsb2FkRmlsZVBvd2VyKHBhcmFtcyxmdW5jdGlvbihyZXQsZXJyKXsNCgkJCQkJCQlpZihyZXQmJnJldC5jb2RlID09IDApew0KCQkJCQkJCQkvL2NvbnNvbGUubG9nKCfojrflj5bmlofku7bkuIrkvKDmnYPpmZDvvJonK0pTT04uc3RyaW5naWZ5KHJldCkpOw0KCQkJCQkJCQl2YXIgcGF0aCA9IHJldC5maWxlTGlzdFswXS5maWxlSWQ7DQoJCQkJCQkJCWlzbG9hZEZsYWcgPSAxOy8v5qCH6K6w5LiK5LygDQoJCQkJCQkJCS8v6Zi/6YeM5LqR5LiK5Lyg5Y+v6IO95Lya5bSp77yM5omA5Lul6L+Z6YeM5a6a5pe25Zmo77yaMTDnp5LlkI7mn6Xor6LmoIforrDkvY3vvIzmioppc2xvYWTkuLoy55qE5Zu+54mH6K6p55So5oi36YCJ5oup5LiK5LygDQoJCQkJCQkJCXZhciBqdWRlZ2VDb2xsYXBzZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXsNCgkJCQkJCQkJCWNvbGxhcHNldmlkZW8oaXNsb2FkRmxhZyxleGFtUmVzdWx0LG9yZGVySWQsd2luTmFtZSxqc2Z1bik7DQoJCQkJCQkJCX0sMTAwMDApOw0KCQkJCQkJCQlmaWxlX3VwbG9hZChyZXQuZmlsZUxpc3RbMF0uc2lnblVybCwgJ3B1dCcsICdqc29uJywgZmlsZVBhdGgsIHt9LCBmdW5jdGlvbihyZXQsZXJyKXsNCgkJCQkJCQkJCWlmKHJldCl7DQoJCQkJCQkJCQkJY2xlYXJUaW1lb3V0KGp1ZGVnZUNvbGxhcHNlKTsvL+a4hemZpOWumuaXtuWZqA0KCQkJCQkJCQkJCWlzbG9hZEZsYWcgPSAyOy8v5qCH6K6w5LiO6Zi/6YeM5LqR5pyN5Yqh5Zmo6L+e5o6lDQoJCQkJCQkJCQkJZXNjX2Z1bmN0aW9uKHdpbk5hbWUsJ2NvbW1vbl9wcm9ncmVzc19mcm0nLCdjaGFuZ2VUeHQoIuato+WcqOS4iuS8oOinhumike+8jOivt+WLv+WFs+mXrSAgJytyZXQucHJvZ3Jlc3MrJyUiKScpOw0KCQkJCQkJCQkJCWlmKHJldC5wcm9ncmVzcyA9PSAxMDAmJnJldC5zdGF0dXMgPT0gMSl7DQoJCQkJCQkJCQkJCWFsZXJ0X21zZygn5LiK5Lyg5a6M5oiQJyk7DQoJCQkJCQkJCQkJCWV4YW1SZXN1bHQucGF0aCA9IHBhdGg7DQoJCQkJCQkJCQkJCXVwbG9hZEV4YW1SZXN1bHQob3JkZXJJZCxleGFtUmVzdWx0LGpzZnVuKTsvL+S4iuS8oOS9k+ajgOe7k+aenOS/oeaBrw0KCQkJCQkJCQkJCX0NCgkJCQkJCQkJCX1lbHNlIGlmKGVycil7DQoJCQkJCQkJCQkJLy9pb3PkuIDnm7TkvJrov5Tlm57mlbDmja7nsbvlnovplJnor68o55uu5YmN5om+5LiN5Yiw5Y6f5ZugKe+8jOS9huaYr+WbvueJh+W3suS4iuS8oOWujOavle+8jOaJgOS7peS5n+W9k3N1Y2Nlc3Pov5Tlm54NCgkJCQkJCQkJCQlpZihzeXN0ZW1UeXBlID0gJ2lvcycmJmVyci5wcm9ncmVzcyA9PSAxMDAmJmVyci5jb2RlID09IDMpew0KCQkJCQkJCQkJCQljbGVhclRpbWVvdXQoanVkZWdlQ29sbGFwc2UpOy8v5riF6Zmk5a6a5pe25ZmoDQoJCQkJCQkJCQkJCWlzbG9hZEZsYWcgPSAyOy8v5qCH6K6w5LiO6Zi/6YeM5LqR5pyN5Yqh5Zmo6L+e5o6lDQoJCQkJCQkJCQkJCQ0KCQkJCQkJCQkJCQlhbGVydF9tc2coJ+S4iuS8oOWujOaIkCcpOw0KCQkJCQkJCQkJCQlleGFtUmVzdWx0LnBhdGggPSBwYXRoOw0KCQkJCQkJCQkJCQl1cGxvYWRFeGFtUmVzdWx0KG9yZGVySWQsZXhhbVJlc3VsdCxqc2Z1bik7Ly/kuIrkvKDkvZPmo4Dnu5Pmnpzkv6Hmga8NCgkJCQkJCQkJCQl9ZWxzZSBpZigoc3lzdGVtVHlwZSA9PSAnaW9zJyYmZXJyLnN0YXR1c0NvZGUgPT0gMCkNCgkJCQkJCQkJCQkJCXx8KHN5c3RlbVR5cGUgPT0gJ2lvcycmJmVyci5zdGF0dXNDb2RlID09IDQwMykpew0KCQkJCQkJCQkJCQljbGVhclRpbWVvdXQoanVkZWdlQ29sbGFwc2UpOy8v5riF6Zmk5a6a5pe25ZmoDQoJCQkJCQkJCQkJCS8v572R57uc5peg5rOV6L+e5o6l5oiW6ICF562+5ZCN6ZSZ6K+v5bCx6YeN5paw5LiK5LygDQoJCQkJCQkJCQkJCXVwbG9hZFZpZGVvRXhhbShvcmRlcklkLHdpbk5hbWUsanNmdW4pOw0KCQkJCQkJCQkJCX0NCgkJCQkJCQkJCX0NCgkJCQkJCQkJCS8qfWVsc2V7DQoJCQkJCQkJCQkJdmFyIGNhY2hlX2J5X2FjY291bnQgPSAkYXBpLmdldFN0b3JhZ2UoJ2NhY2hlX2J5X2FjY291bnQnKTsNCgkJCQkJCQkJCQljYWNoZV9ieV9hY2NvdW50LmV4YW1fcmVzdWx0ID0gZXhhbVJlc3VsdDsNCgkJCQkJCQkJCQkkYXBpLnNldFN0b3JhZ2UoJ2NhY2hlX2J5X2FjY291bnQnLGNhY2hlX2J5X2FjY291bnQpOy8v5bCG5pyA6L+R5LiA5qyh5L2T5qOA57uT5p6c5L+d5a2Y5Zyo57yT5a2Y5Lit77yM6KeG6aKR5LiK5Lyg5aSx6LSl5oiW6ICF5LiN5Lyg5Y+v5Lul6YCJ5oup57un57ut5LiK5LygDQoJCQkJCQkJCQkJYXBpLmFsZXJ0KCfkuIrkvKDlpLHotKXvvIzmgqjlj6/ku6XlnKjjgJDmiJHnmoTjgJHkuK3pgInmi6nnu6fnu63kuIrkvKAnKTsNCgkJCQkJCQkJCX0qLw0KCQkJCQkJCQl9KTsNCgkJCQkJCQl9ZWxzZXsNCgkJCQkJCQkJYWxlcnRfbXNnKCfojrflj5bmlofku7bkuIrkvKDmnYPpmZDlpLHotKUnKTsNCgkJCQkJCQl9DQoJCQkJCQl9KTsNCgkJICAgIAl9ZWxzZXsNCgkJICAgIAkJY2xvc2VfbG9hZCgpOw0KCQkgICAgCQlhbGVydF9tc2coJ+acrOWcsOaXoOinhumikeS4iuS8oCcpOw0KCQkgICAgCX0NCgkJICAgIH0pOw0KCQl9LDYwMCk7DQoJfQ0KfQ0KDQoNCi8qKg0KICog5LiK5Lyg5L2T5qOA5L+h5oGv5Yiw5pyN5Yqh5ZmoDQogKi8NCmZ1bmN0aW9uIHVwbG9hZEV4YW1SZXN1bHQob3JkZXJJZCxleGFtUmVzdWx0LGpzZnVuKXsNCgllc2NfZnVuY3Rpb24oJycsJ2NvbW1vbl9wcm9ncmVzc19mcm0nLCdjaGFuZ2VUeHQoIuinhumikeS8oOi+k+WujOaIkO+8jOato+WcqOaPkOS6pOS/oeaBr+WIsOacjeWKoeWZqCIpJyk7DQoJdXJsID0gJ2FwaS9pdGVtLWJhbmsvaW5zZXJ0LXVzZXItYW5zd2VyJzsNCglhamF4X1JlcXVlc3QodXJsLCAncG9zdCcsICdqc29uJywgZXhhbVJlc3VsdCwgZnVuY3Rpb24ocmV0LGVycil7DQoJCWlmKHJldCl7DQoJCQlpZihyZXQuY29kZSA9PSAwKXsNCgkJCQlkZWxldGVFeGFtVmlkZW8oZXhhbVJlc3VsdC5leGFJZCxmdW5jdGlvbigpew0KCQkJCQljbG9zZV9sb2FkKCk7DQoJCQkJCWFsZXJ0X21zZygn5LiK5Lyg5oiQ5YqfJyk7DQoJCQkJCWpzZnVuKCk7DQoJCQkJfSk7DQoJCQl9ZWxzZXsNCgkJCQlhbGVydF9tc2cocmV0Lm1zZyk7DQoJCQl9DQoJCX1lbHNlew0KCQkJYWxlcnRfbXNnKCfmnI3liqHlmajplJnor68nKTsNCgkJfQ0KCX0pOw0KfQ0KDQoNCi8qKg0KICog5Yik5pat5piv5ZCm5pyJ5Zu+54mH5LiK5Lyg5pe25YCZ5LiO6Zi/6YeM5LqR5pat5byA6L+e5o6lDQogKi8NCmZ1bmN0aW9uIGNvbGxhcHNldmlkZW8oaXNsb2FkRmxhZyxleGFtUmVzdWx0LG9yZGVySWQsd2luTmFtZSxqc2Z1bil7DQoJY2xvc2VfbG9hZCgpOw0KCWlmKGlzbG9hZEZsYWcgPT0gMSl7DQoJCWFwaS5jb25maXJtKHsNCgkJICAgIHRpdGxlOiAn5rip6aao5o+Q56S6JywNCgkJICAgIG1zZzogJ+S4iuS8oOS9k+ajgOinhumikeS4juacjeWKoeWZqOaWreW8gOi/nuaOpe+8jOaYr+WQpumHjei/nicsDQoJCSAgICBidXR0b25zOiBbJ+mHjeaWsOi/nuaOpScsICfkuI3kuIrkvKDkuoYnXQ0KCQl9LCBmdW5jdGlvbihyZXQsIGVycikgew0KCQkgICAgdmFyIGluZGV4ID0gcmV0LmJ1dHRvbkluZGV4Ow0KCQkgICAgaWYoaW5kZXggPT0gMSl7DQoJCSAgICAJdXBsb2FkVmlkZW9FeGFtKG9yZGVySWQsd2luTmFtZSxqc2Z1bik7DQoJCSAgICB9DQoJCSAgICBpZihpbmRleCA9PSAyKXsNCg0KCQkgICAgfQ0KCQl9KTsNCgl9DQp9DQoNCi8qKg0KICog5Y6755m75b2VDQogKi8NCmZ1bmN0aW9uIG9wZW5Mb2dpbkh0bWwoZGF0YSl7DQoJYXBpLm9wZW5XaW4oew0KICAgICAgIG5hbWU6ICdsb2dpbicsDQogICAgICAgdXJsOiAnLi4vbG9naW4uaHRtbCcsDQogICAgICAgc2xpZEJhY2tFbmFibGVkOid0cnVlJywNCiAgICAgICB2U2Nyb2xsQmFyRW5hYmxlZDonZmFsc2UnLA0KICAgICAgIGhTY3JvbGxCYXJFbmFibGVkOidmYWxzZScsDQogICAgICAgcmVsb2FkOnRydWUsDQogICAgICAgcGFnZVBhcmFtOiBkYXRhDQogICB9KTsNCn0NCg0KLyoqDQogKiDljrvorqTor4ENCiAqLw0KZnVuY3Rpb24gb3BlbkF1dGhIdG1sKGRhdGEpew0KCWFwaS5vcGVuV2luKHsNCiAgICAgICBuYW1lOiAnbWluZV9hY2NvdW50X2F1dGhfd2luJywNCiAgICAgICB1cmw6ICcuLi9taW5lL21pbmVfYWNjb3VudF9hdXRoX3dpbi5odG1sJywNCiAgICAgICBzbGlkQmFja0VuYWJsZWQ6J3RydWUnLA0KICAgICAgIHZTY3JvbGxCYXJFbmFibGVkOidmYWxzZScsDQogICAgICAgaFNjcm9sbEJhckVuYWJsZWQ6J2ZhbHNlJywNCiAgICAgICByZWxvYWQ6dHJ1ZSwNCiAgICAgICBwYWdlUGFyYW06IGRhdGENCiAgIH0pOw0KfQ0KDQovKioNCiAqIOi/lOWbnuW9k+WJjeWumuS9jQ0KICovDQp2YXIgbG9jYXRpb25fcmVzdWx0ID0ge307DQpmdW5jdGlvbiBteWxvY2F0aW9uKGpzZnVuKXsNCgliTWFwLmdldExvY2F0aW9uU2VydmljZXMoZnVuY3Rpb24ocmV0LGVycil7DQoJCWlmIChyZXQuZW5hYmxlKSB7DQoJCQliTWFwLmdldExvY2F0aW9uKHsNCgkJCSAgICBhY2N1cmFjeTogJzEwMG0nLA0KCQkJICAgIGF1dG9TdG9wOiB0cnVlLA0KCQkJICAgIGZpbHRlcjogMQ0KCQkJfSwgZnVuY3Rpb24ocmV0LCBlcnIpIHsNCgkJCSAgICBpZiAocmV0LnN0YXR1cykgew0KCQkJICAgIAlsb2NhdGlvbl9yZXN1bHQuc3RhdHVzID0gdHJ1ZTsNCgkJCSAgICAJbG9jYXRpb25fcmVzdWx0LmxvbiA9IHJldC5sb247DQoJCQkgICAgCWxvY2F0aW9uX3Jlc3VsdC5sYXQgPSByZXQubGF0Ow0KCQkJICAgIAlqc2Z1bihsb2NhdGlvbl9yZXN1bHQpOw0KCQkJICAgIH0gZWxzZSB7DQoJCQkgICAgCWxvY2F0aW9uX3Jlc3VsdC5zdGF0dXMgPSBmYWxzZTsNCgkJCSAgICAJbG9jYXRpb25fcmVzdWx0Lm1zZyA9ICflrprkvY3lpLHotKUnOw0KCQkJICAgICAgICBqc2Z1bihsb2NhdGlvbl9yZXN1bHQpOw0KCQkJICAgIH0NCgkJCX0pOw0KCSAgICB9IGVsc2Ugew0KCSAgICAJbG9jYXRpb25fcmVzdWx0LnN0YXR1cyA9IGZhbHNlOw0KCSAgICAJbG9jYXRpb25fcmVzdWx0Lm1zZyA9ICfmgqjov5jmnKrlvIDlkK/lrprkvY3mnYPpmZAnOw0KCSAgICAgICAganNmdW4obG9jYXRpb25fcmVzdWx0KTsNCgkgICAgfQ0KCX0pOw0KfQ0KDQovKioNCiAqIOiOt+WPlui0puaIt2lkIOWJjeaPkOaYr+W3sueZu+W9leeKtuaAge+8jOWQpuWImeiCr+WumuaKpemUmQ0KICovDQpmdW5jdGlvbiBnZXRVc2VySWQoKXsNCglyZXR1cm4gJGFwaS5nZXRTdG9yYWdlKCdjYWNoZV9ieV9hY2NvdW50JykuY2FjaGVfYWNjb3VudC5pZDsNCn0NCg0KLyoqDQogKiDojrflj5botKblj7flkI3np7ANCiAqLw0KZnVuY3Rpb24gZ2V0QWNjb3VudChhY2NvdW50X2luZm8pew0KCWlmKGFjY291bnRfaW5mby5uaWNrbmFtZSAhPSBudWxsDQoJCSYmYWNjb3VudF9pbmZvLm5pY2tuYW1lICE9ICcnDQoJCSYmYWNjb3VudF9pbmZvLm5pY2tuYW1lICE9IHVuZGVmaW5lZA0KCQkmJmFjY291bnRfaW5mby5uaWNrbmFtZSAhPSAndW5kZWZpbmVkJyl7DQoJCXJldHVybiBhY2NvdW50X2luZm8ubmlja25hbWU7DQoJfWVsc2UgaWYoYWNjb3VudF9pbmZvLm5hbWUgIT0gbnVsbA0KCQkmJmFjY291bnRfaW5mby5uYW1lICE9ICcnDQoJCSYmYWNjb3VudF9pbmZvLm5hbWUgIT0gdW5kZWZpbmVkDQoJCSYmYWNjb3VudF9pbmZvLm5hbWUgIT0gJ3VuZGVmaW5lZCcpew0KCQlyZXR1cm4gYWNjb3VudF9pbmZvLm5hbWU7DQoJfWVsc2V7DQoJCXJldHVybiBhY2NvdW50X2luZm8uYWNjb3VudA0KCX0NCn0NCg0KLy/ojrflj5botKblj7flpLTlg48NCmZ1bmN0aW9uIGdldEhlYWRJbWcoYWNjb3VudF9pbmZvLGpzZnVuKXsNCglpZihhY2NvdW50X2luZm8uaGVhZGltZ3VybCAhPSBudWxsDQoJCSYmYWNjb3VudF9pbmZvLmhlYWRpbWd1cmwgIT0gJycNCgkJJiZhY2NvdW50X2luZm8uaGVhZGltZ3VybCAhPSB1bmRlZmluZWQNCgkJJiZhY2NvdW50X2luZm8uaGVhZGltZ3VybCAhPSAndW5kZWZpbmVkJyl7DQoJCXJldHVyblNtYWxsZXJQaWMoZmlsZV9sb2FkX3VybCArIGFjY291bnRfaW5mby5oZWFkaW1ndXJsLGZ1bmN0aW9uKHNtYWxsZXJQYXRoKXsNCgkJCWpzZnVuKHNtYWxsZXJQYXRoKTsNCgkJfSk7DQoJfWVsc2V7DQoJCWpzZnVuKCcuLi8uLi9pY29uL21pbmUvaWNvbl9taW5lX2hlYWQucG5nJyk7DQoJfQ0KfQ0KDQoNCi8v5p+l55yL5Zu+54mH6K+m5oOFDQpmdW5jdGlvbiBvcGVuUGljKHBhdGgpew0KCWNvbnNvbGUubG9nKCdwYXRoOicrcGF0aCk7DQoJcGFyYW0gPSB7DQoJCXBhdGg6cGF0aA0KCX0NCglhcGkub3BlbkZyYW1lKHsNCiAgICAgICAgbmFtZTogJ2NvbW1vbl9waWNfZGV0YWlsX2ZybScsDQogICAgICAgIHVybDogJy4uL2NvbW1vbi9jb21tb25fcGljX2RldGFpbF9mcm0uaHRtbCcsDQogICAgICAgIGJnQ29sb3I6ICdyZ2JhKDAsMCwwLDAuNiknLA0KICAgICAgICByZWN0OiB7DQogICAgICAgICAgICB4OiAwLA0KICAgICAgICAgICAgeTogMCwNCiAgICAgICAgICAgIHc6ICdhdXRvJywNCiAgICAgICAgICAgIGg6IGFwaS53aW5IZWlnaHQNCiAgICAgICAgfSwNCiAgICAgICAgYm91bmNlczogZmFsc2UsDQogICAgICAgIHNjYWxlRW5hYmxlZDp0cnVlLA0KICAgICAgICBwYWdlUGFyYW06cGFyYW0sDQogICAgICAgIHNvZnRJbnB1dEJhckVuYWJsZWQ6dHJ1ZSwNCiAgICAgICAgc29mdElucHV0TW9kZToncmVzaXplJw0KICAgIH0pOw0KfQ0KDQovL+ehruiupOaPkOekuuWwgeijhQ0KLy90aXRsZeagh+mimCAgbXNn5o+Q56S65YaF5a65ICBvcHRpb24x5omn6KGM6YCJ6aG5IG9wdGlvbjLpnZ7miafooYzpgInpobkganNmdW7lm57osIPmlrnms5UNCmZ1bmN0aW9uIGlzU3VyZSh0aXRsZSxtc2csb3B0aW9uMSxvcHRpb24yLGpzZnVuLGpzQ2FuY2VsZnVuKXsNCglhcGkuY29uZmlybSh7DQoJICAgIHRpdGxlOiB0aXRsZSwNCgkgICAgbXNnOiBtc2csDQoJICAgIGJ1dHRvbnM6IFtvcHRpb24xLCBvcHRpb24yXQ0KCX0sIGZ1bmN0aW9uKHJldCwgZXJyKSB7DQoJICAgIHZhciBpbmRleCA9IHJldC5idXR0b25JbmRleDsNCgkgICAgaWYoaW5kZXggPT0gMSl7DQoJICAgIAlqc2Z1bigpOw0KCSAgICB9DQoJICAgIGlmKGluZGV4ID09IDImJmpzQ2FuY2VsZnVuICE9IHVuZGVmaW5lZCl7DQoJICAgIAlqc0NhbmNlbGZ1bigpOw0KCSAgICB9DQoJfSk7DQp9DQoNCi8qKg0KICog5Y+R6YCB6Ieq5a6a5LmJ5LqL5Lu2DQogKi8NCmZ1bmN0aW9uIHNlbmRFdmVudChuYW1lLHBhcmFtcyl7DQoJYXBpLnNlbmRFdmVudCh7DQoJICAgIG5hbWU6IG5hbWUsDQoJICAgIGV4dHJhOiBwYXJhbXMNCgl9KTsNCn0NCg0KLyoqDQogKiDnm5HlkKzoh6rlrprkuYnkuovku7YNCiAqLw0KZnVuY3Rpb24gdG9FdmVudExpc3RlbmVyKG5hbWUsZnVuYyl7DQoJYXBpLmFkZEV2ZW50TGlzdGVuZXIoew0KCSAgICBuYW1lOiBuYW1lDQoJfSwgZnVuY3Rpb24ocmV0LCBlcnIpIHsNCgkgICAgZnVuYyhyZXQsZXJyKTsNCgl9KTsNCn0NCg0KLyoqDQogKiDmj5DnpLoNCiAqLw0KZnVuY3Rpb24gYWxlcnRfbXNnKG1zZyl7DQoJYXBpLnRvYXN0KHsNCgkgICAgbXNnOiBtc2csDQoJICAgIGR1cmF0aW9uOiAxNTAwLA0KCSAgICBsb2NhdGlvbjogJ21pZGRsZScNCgl9KTsNCn0NCg0KLyoqDQogKiDorqHnrpfot53nprvljZXkvY0NCiAqLw0KZnVuY3Rpb24gY2FsY3VEaXN0YW5jZShkaXN0YW5jZSl7DQoJaWYoZGlzdGFuY2UgPT0gLTEpew0KCQlyZXR1cm4gJyB+IG0nOw0KCX0NCglpZihkaXN0YW5jZSA8IDEwMDApew0KCQlyZXR1cm4gZGlzdGFuY2UgKyAnbSc7DQoJfWVsc2V7DQoJCXJldHVybiAoZGlzdGFuY2UvMTAwMCkudG9GaXhlZCgyKSArICdrbSc7DQoJfQ0KfQ0KDQovKioNCiAqIOagueaNrui6q+S7veivgeiuoeeul+W5tOm+hA0KICovDQpmdW5jdGlvbiBnZXRBZ2VCeUlkQ2FyZChpZGVudGl0eUNhcmQpIHsNCiAgICB2YXIgbGVuID0gKGlkZW50aXR5Q2FyZCArICIiKS5sZW5ndGg7DQogICAgaWYgKGxlbiA9PSAwKSB7DQogICAgICAgIHJldHVybiAwOw0KICAgIH0gZWxzZSB7DQogICAgICAgIGlmICgobGVuICE9IDE1KSAmJiAobGVuICE9IDE4KSkvL+i6q+S7veivgeWPt+eggeWPquiDveS4ujE15L2N5oiWMTjkvY3lhbblroPkuI3lkIjms5UNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIDA7DQogICAgICAgIH0NCiAgICB9DQogICAgdmFyIHN0ckJpcnRoZGF5ID0gIiI7DQogICAgaWYgKGxlbiA9PSAxOCkvL+WkhOeQhjE45L2N55qE6Lqr5Lu96K+B5Y+356CB5LuO5Y+356CB5Lit5b6X5Yiw55Sf5pel5ZKM5oCn5Yir5Luj56CBDQogICAgew0KICAgICAgICBzdHJCaXJ0aGRheSA9IGlkZW50aXR5Q2FyZC5zdWJzdHIoNiwgNCkgKyAiLyIgKyBpZGVudGl0eUNhcmQuc3Vic3RyKDEwLCAyKSArICIvIiArIGlkZW50aXR5Q2FyZC5zdWJzdHIoMTIsIDIpOw0KICAgIH0NCiAgICBpZiAobGVuID09IDE1KSB7DQogICAgICAgIHN0ckJpcnRoZGF5ID0gIjE5IiArIGlkZW50aXR5Q2FyZC5zdWJzdHIoNiwgMikgKyAiLyIgKyBpZGVudGl0eUNhcmQuc3Vic3RyKDgsIDIpICsgIi8iICsgaWRlbnRpdHlDYXJkLnN1YnN0cigxMCwgMik7DQogICAgfQ0KICAgIC8v5pe26Ze05a2X56ym5Liy6YeM77yM5b+F6aG75piv4oCcL+KAnQ0KICAgIHZhciBiaXJ0aERhdGUgPSBuZXcgRGF0ZShzdHJCaXJ0aGRheSk7DQogICAgdmFyIG5vd0RhdGVUaW1lID0gbmV3IERhdGUoKTsNCiAgICB2YXIgYWdlID0gbm93RGF0ZVRpbWUuZ2V0RnVsbFllYXIoKSAtIGJpcnRoRGF0ZS5nZXRGdWxsWWVhcigpOw0KICAgIC8v5YaN6ICD6JmR5pyI44CB5aSp55qE5Zug57SgOy5nZXRNb250aCgp6I635Y+W55qE5piv5LuOMOW8gOWni+eahO+8jOi/memHjOi/m+ihjOavlOi+g++8jOS4jemcgOimgeWKoDENCiAgICBpZiAobm93RGF0ZVRpbWUuZ2V0TW9udGgoKSA8IGJpcnRoRGF0ZS5nZXRNb250aCgpIHx8IChub3dEYXRlVGltZS5nZXRNb250aCgpID09IGJpcnRoRGF0ZS5nZXRNb250aCgpICYmIG5vd0RhdGVUaW1lLmdldERhdGUoKSA8IGJpcnRoRGF0ZS5nZXREYXRlKCkpKSB7DQogICAgICAgIGFnZS0tOw0KICAgIH0NCiAgICByZXR1cm4gYWdlOw0KfQ0KDQovKioNCiAqIOWOi+e8qeWbvueJhw0KICovDQpmdW5jdGlvbiBwaWNJbWFnZUZpbHRlcihpbWdfcGF0aCxmdW5jKXsNCgl2YXIgcGF0aF9pbWcgPSBpbWdfcGF0aC5zcGxpdCgiLyIpOw0KCXZhciBpbWdfbmFtZSA9IHBhdGhfaW1nW3BhdGhfaW1nLmxlbmd0aCAtIDFdOw0KCWltYWdlRmlsdGVyLmNvbXByZXNzKHsNCgkgICAgaW1nOiBpbWdfcGF0aCwNCgkgICAgcXVhbGl0eTogMC41LA0KCSAgICBzYXZlOnsNCgkgICAgCWFsYnVtOiBmYWxzZSwgICAgICAgICAgIC8vKOWPr+mAiemhuSnluIPlsJTlgLzvvIzmmK/lkKbkv53lrZjliLDns7vnu5/nm7jlhozvvIzpu5jorqRmYWxzZQ0KCQkgICAgaW1nUGF0aDonZnM6Ly9zbWFsbGVyUGljdHJ1ZScsICAgLy8o5Y+v6YCJ6aG5KeS/neWtmOeahOaWh+S7tui3r+W+hCzlrZfnrKbkuLLnsbvlnovvvIzml6Dpu5jorqTlgLws5LiN5Lyg5oiW5Lyg56m65YiZ5LiN5L+d5a2Y77yM6Iul6Lev5b6E5LiN5a2Y5Zyo5paH5Lu25aS55YiZ5Yib5bu65q2k55uu5b2VDQoJCSAgICBpbWdOYW1lOmltZ19uYW1lICAgICAgICAgLy8o5Y+v6YCJ6aG5KeS/neWtmOeahOWbvueJh+WQjeWtl++8jOaUr+aMgXBuZ+WSjGpwZ+agvOW8j++8jOiLpeS4jeaMh+WumuagvOW8j++8jOWImem7mOiupHBuZ++8jOWtl+espuS4suexu+Wei++8jOaXoOm7mOiupOWAvCzkuI3kvKDmiJbkvKDnqbrliJnkuI3kv53lrZgNCgkgICAgfQ0KCX0sZnVuY3Rpb24ocmV0LCBlcnIpew0KCSAgICBpZihyZXQuc3RhdHVzKXsNCgkgICAgCWZ1bmMoYXBpLmZzRGlyICsgJy9zbWFsbGVyUGljdHJ1ZS8nICsgaW1nX25hbWUpOw0KCSAgICB9ZWxzZXsNCgkgICAgICAgIGZ1bmMoJycpOw0KCSAgICB9DQoJfSk7DQp9DQoNCi8qKg0KICog5pSv5LuY5a6d5pSv5LuYDQogKi8NCmZ1bmN0aW9uIEFsaXBQYXkoYWxpUGF5UmV0dXJuLGpzZnVuLGVycmZ1bil7DQoJYWxpUGF5UGx1cy5wYXlPcmRlcih7DQoJCW9yZGVySW5mbzphbGlQYXlSZXR1cm4ub3JkZXJJbmZvDQoJfSwgZnVuY3Rpb24ocmV0LCBlcnIpIHsNCgkgICAgbG9nKCfpmL/ph4zmlK/ku5jov5Tlm54nLHJldCk7DQoJICAgIGlmKHJldCl7DQoJICAgIAlpZihyZXQuY29kZSA9PSAnOTAwMCcpew0KCSAgICAJCWpzZnVuKCk7DQoJICAgIAl9ZWxzZXsNCgkJICAgIAlpZihyZXQuY29kZSA9PSAnODAwMCcpew0KCQkgICAgCQllcnJmdW4oJ+ato+WcqOWkhOeQhuS4re+8jOaUr+S7mOe7k+aenOacquefpScpOw0KCQkgICAgCX1lbHNlIGlmKHJldC5jb2RlID09ICc0MDAwJyl7DQoJCSAgICAJCWVycmZ1bign6K6i5Y2V5pSv5LuY5aSx6LSlJyk7DQoJCSAgICAJfWVsc2UgaWYocmV0LmNvZGUgPT0gJzUwMDAnKXsNCgkJICAgIAkJZXJyZnVuKCfph43lpI3or7fmsYInKTsNCgkJICAgIAl9ZWxzZSBpZihyZXQuY29kZSA9PSAnNjAwMScpew0KCQkgICAgCQllcnJmdW4oJ+eUqOaIt+S4remAlOWPlua2iOaUr+S7mOaTjeS9nCcpOw0KCQkgICAgCX1lbHNlIGlmKHJldC5jb2RlID09ICc2MDAyJyl7DQoJCSAgICAJCWVycmZ1bign572R57uc6L+e5o6l5Ye66ZSZJyk7DQoJCSAgICAJfWVsc2UgaWYocmV0LmNvZGUgPT0gJzYwMDQnKXsNCgkJICAgIAkJZXJyZnVuKCfmlK/ku5jnu5PmnpzmnKrnn6UnKTsNCgkJICAgIAl9ZWxzZXsNCgkJICAgIAkJZXJyZnVuKCfmnKrnn6XnirbmgIEnKTsNCgkJICAgIAl9DQoJICAgIAl9DQoJICAgIH1lbHNlew0KCSAgICAJZXJyZnVuKCk7DQoJICAgIAlhbGVydF9tc2coJ+aUr+S7mOWksei0pScpOw0KCSAgICB9DQoJfSk7DQp9DQoNCi8qKg0KICog5b6u5L+h5pSv5LuYDQogKi8NCmZ1bmN0aW9uIFdlY2hhdFBheSh3ZWNoYXRwYXlSZXR1cm4sanNmdW4sZXJyZnVuKXsNCgl3eFBheS5wYXlPcmRlcih7DQoJICAgIGFwaUtleTogd2VjaGF0cGF5UmV0dXJuLmFwcEtleSwNCgkgICAgb3JkZXJJZDogd2VjaGF0cGF5UmV0dXJuLm9yZGVySWQsDQoJICAgIG1jaElkOiB3ZWNoYXRwYXlSZXR1cm4ubWNoSWQsDQoJICAgIG5vbmNlU3RyOiB3ZWNoYXRwYXlSZXR1cm4ubm9uY2VTdHIsDQoJICAgIHRpbWVTdGFtcDogd2VjaGF0cGF5UmV0dXJuLnRpbWVTdGFtcCwNCgkgICAgcGFja2FnZTogd2VjaGF0cGF5UmV0dXJuLnBhY2thZ2VTdHIsDQoJICAgIHNpZ246IHdlY2hhdHBheVJldHVybi5zaWduDQoJfSwgZnVuY3Rpb24ocmV0LCBlcnIpIHsNCgkJLy9sb2coJ+W+ruS/oeaUr+S7mOi/lOWbnicscmV0KTsNCgkgICAgaWYgKHJldC5zdGF0dXMpIHsNCgkgICAgICAgIGpzZnVuKCk7DQoJICAgIH1lbHNlew0KCQkgICAgaWYoZXJyLmNvZGUgPT0gMSl7DQoJCSAgICAgICAgZXJyZnVuKCfmlK/ku5jplJnor68nK2Vyci5jb2RlKTsNCgkJICAgIH1lbHNlIGlmKGVyci5jb2RlID09IC0yKXsNCgkJICAgIAllcnJmdW4oJ+eUqOaIt+WPlua2iCcpOw0KCQkgICAgfWVsc2V7DQoJCSAgICAJZXJyZnVuKCfmnKrnn6XplJnor68nKTsNCgkJICAgIH0NCgkgICAgfQ0KCX0pOw0KfQ0KDQovL+aVsOe7hOWOu+mHjQ0KZnVuY3Rpb24gcmVtb3ZlRHVwbGljYXRlZEl0ZW0oYXJyKSB7DQogICAgZm9yKHZhciBpID0gYXJyLmxlbmd0aC0xOyBpID4gMSA7IGktLSl7DQogICAgICAgZm9yKHZhciBqID0gaS0xOyBqID49IDA7IGotLSl7DQogICAgICAgICAgaWYoYXJyW2ldID09IGFycltqXSl7DQogICAgICAgICAgICAgIGFyci5zcGxpY2UoaiwxKTsNCiAgICAgICAgICAgICAgai0tOw0KICAgICAgICAgIH0NCiAgICAgICB9DQogICAgfQ0KICAgIHJldHVybiBhcnI7DQp9DQoNCi8v5qC55o2u6K+E5YiG6K6h566X5pif5pifDQp2YXIgc3Rhcl9saWdodF9udW0gPSAwOy8v5Lqu5pif5pifDQp2YXIgc3Rhcl9kYXJrX251bSA9IDA7Ly/mmpfmmJ/mmJ8NCmZ1bmN0aW9uIGNhbGN1U3RhcihzY29yZSl7DQoJdmFyIHN0YXJfbWVudSA9ICcnOw0KCXN0YXJfbGlnaHRfbnVtID0gTWF0aC5yb3VuZChzY29yZSk7DQoJc3Rhcl9kYXJrX251bSA9IDUgLSBzdGFyX2xpZ2h0X251bTsNCglmb3IodmFyIGk9MDtpPHN0YXJfbGlnaHRfbnVtO2krKyl7DQoJCXN0YXJfbWVudSArPSAnPGxpPjxpbWcgc3JjPSIuLi8uLi9pY29uL2NvbW1vbi9pY29uX3hpbmdfbGlnaHQucG5nIiBhbHQ9IiIgLz48L2xpPic7DQoJfQ0KCWZvcih2YXIgaT0wO2k8c3Rhcl9kYXJrX251bTtpKyspew0KCQlzdGFyX21lbnUgKz0gJzxsaT48aW1nIHNyYz0iLi4vLi4vaWNvbi9jb21tb24vaWNvbl94aW5nX2RhcmsucG5nIiBhbHQ9IiIgLz48L2xpPic7DQoJfQ0KCWlmKChzY29yZSArICcnKS5sZW5ndGggPT0gMSl7DQoJCXNjb3JlID0gc2NvcmUgKyAnLjAnOyANCgl9DQoJc3Rhcl9tZW51ICs9ICc8bGk+PHNwYW4+Jysoc2NvcmUpKyc8L3NwYW4+PC9saT4nOw0KCXJldHVybiBzdGFyX21lbnU7DQp9DQoNCi8v6YeR6aKd5qC85byP5YyWDQp2YXIgY2FzaHM7DQpmdW5jdGlvbiBjYXNoRm9ybWF0KGNhc2gpew0KCWNhc2hzID0gKGNhc2ggKyAnJykuc3BsaXQoJy4nKTsNCglpZihjYXNocy5sZW5ndGggPT0gMSl7DQoJCXJldHVybiBjYXNoICsgJy48c3BhbiBjbGFzcz0idHh0LXNtYWxsIj4wPC9zcGFuPic7DQoJfWVsc2V7DQoJCXJldHVybiBjYXNoc1swXSArICcuPHNwYW4gY2xhc3M9InR4dC1zbWFsbCI+JyArY2FzaHNbMV0uc3Vic3RyaW5nKDAsMikgKyAnPC9zcGFuPic7DQoJfQ0KfQ0KDQovL+e6r+mHkemineagvOW8j+WMlg0KZnVuY3Rpb24gY2FzaEZvcm1hdE8oY2FzaCl7DQoJY2FzaHMgPSAoY2FzaCArICcnKS5zcGxpdCgnLicpOw0KCWlmKGNhc2ggPCAwKXsNCgkJcmV0dXJuICcwLjAnOw0KCX1lbHNlIGlmKGNhc2hzLmxlbmd0aCA9PSAxKXsNCgkJcmV0dXJuIGNhc2ggKyAnLjAnOw0KCX1lbHNlew0KCQlyZXR1cm4gY2FzaHNbMF0gKyAnLicgKyBjYXNoc1sxXS5zdWJzdHJpbmcoMCwyKTsNCgl9DQp9DQoNCi8v5qCh6aqM6aqM6K+B56CBDQpmdW5jdGlvbiBpc0NvZGVBdmFpbGFibGUoY29kZSl7DQoJdmFyIG15cmVnID0gL15cZHs2fSQvOw0KICAgIGlmICghbXlyZWcudGVzdChjb2RlKSkgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KfQ0KDQovL+e8k+WtmOWbvueJhy7liKTmlq3lm77niYfliqDovb0g77yI5byD55SoICAq6LW154Kc54KcIDIwMTktMy0xMyAxNDowNToxOe+8iQ0KZnVuY3Rpb24gaUNhY2hlKHNlbGVjdG9yKSB7DQoJc2VsZWN0b3IuZWFjaChmdW5jdGlvbihkYXRhKSB7ISBmdW5jdGlvbihkYXRhKSB7DQoJCQl2YXIgdXJsID0gc2VsZWN0b3IuZXEoZGF0YSkuYXR0cigic3JjIik7DQoJCQl2YXIgaW1nID0gdGhpczsNCgkJCXZhciBwb3MgPSB1cmwubGFzdEluZGV4T2YoIi8iKTsNCgkJCXZhciBmaWxlbmFtZSA9IHVybC5zdWJzdHJpbmcocG9zICsgMSk7DQoJCQl2YXIgcGF0aCA9IGFwaS5jYWNoZURpciArICIvcGljLyIgKyBmaWxlbmFtZTsNCgkJCXZhciBvYmogPSBhcGkucmVxdWlyZSgnZnMnKTsNCgkJCW9iai5leGlzdCh7DQoJCQkJcGF0aCA6IHBhdGgNCgkJCX0sIGZ1bmN0aW9uKHJldCwgZXJyKSB7DQoJCQkJaWYgKHJldC5leGlzdCkgew0KCQkJCQlpZiAocmV0LmRpcmVjdG9yeSkgew0KCQkJCQkJLy9hcGkuYWxlcnQoe21zZzon6K+l6Lev5b6E5oyH5ZCR5LiA5Liq5paH5Lu25aS5J30pOw0KCQkJCQl9IGVsc2Ugew0KCQkJCQkJLy9hcGkuYWxlcnQoe21zZzon6K+l6Lev5b6E5oyH5ZCR5LiA5Liq5paH5Lu2J30pOw0KCQkJCQkJLy9zZWxlY3Rvci5lcShkYXRhKS5zcmM9cGF0aDsNCgkJCQkJCWNvbnNvbGUubG9nKCLlrZjlnKjlm77niYciKTsNCgkJCQkJCXNlbGVjdG9yLmVxKGRhdGEpLmF0dHIoJ3NyYycsIG51bGwpOw0KCQkJCQkJcGF0aCA9IGFwaS5jYWNoZURpciArICIvcGljLyIgKyBmaWxlbmFtZTsNCgkJCQkJCXNlbGVjdG9yLmVxKGRhdGEpLmF0dHIoJ3NyYycsIHBhdGgpOw0KCQkJCQkJLy9jb25zb2xlLmxvZyhzZWxlY3Rvci5lcShkYXRhKS5hdHRyKCJzcmMiKSk7DQoJCQkJCX0NCgkJCQl9ZWxzZXsNCgkJCQkJaWYocGF0aCE9JycmJnBhdGghPW51bGwpew0KCQkJCQkJYXBpLmRvd25sb2FkKHsNCgkJCQkJCQl1cmwgOiB1cmwsDQoJCQkJCQkJc2F2ZVBhdGggOiBwYXRoLA0KCQkJCQkJCXJlcG9ydCA6IGZhbHNlLA0KCQkJCQkJCWNhY2hlIDogdHJ1ZSwNCgkJCQkJCQlhbGxvd1Jlc3VtZSA6IHRydWUNCgkJCQkJCX0sIGZ1bmN0aW9uKHJldCwgZXJyKSB7DQoJCQkJCQkJaWYgKHJldCkgew0KCQkJCQkJCQljb25zb2xlLmxvZygn5paH5Lu25aSn5bCP77yaJyArIHJldC5maWxlU2l6ZSArICfvvJvkuIvovb3ov5vluqbvvJonICsgcmV0LnBlcmNlbnQgKyAn77yb5LiL6L2954q25oCBJyArIHJldC5zdGF0ZSArICflrZjlgqjot6/lvoQ6ICcgKyByZXQuc2F2ZVBhdGgpOw0KCQkJCQkJCX0gZWxzZSB7DQoJCQkJCQkJCWNvbnNvbGUubG9nKGVyci5tc2cpOw0KCQkJCQkJCX07DQoJCQkJCQl9KTsNCgkJCQkJfQ0KCQkJCX0NCgkJCX0pOw0KCQl9KGRhdGEpOw0KCX0pOw0KfTsNCg0KLyoqDQoqIOW7tui/n+WKoOi9vQ0KKi8NCmZ1bmN0aW9uIGVjaG9Jbml0KCkgew0KICAgIGVjaG8uaW5pdCh7DQogICAgICAgIG9mZnNldCA6IDAsDQogICAgICAgIHRocm90dGxlIDogMTAgLy/orr7nva7lm77niYflu7bov5/liqDovb3nmoTml7bpl7QNCiAgICB9KTsNCn0NCg0KLy/moLnmja7nvZHnu5zlm77niYflnLDlnYDojrflj5bmnKzlnLDnvJPlrZjlnLDlnYAg5YmN5o+Q5piv5pys5Zyw5bey57yT5a2Y6K+l5Zu+54mHIO+8iOW8g+eUqCAgKui1teeCnOeCnCAyMDE5LTMtMTMgMTQ6MDU6MTnvvIkNCmZ1bmN0aW9uIGdldExvY2FsUGljQnlVcmwobmV0VXJsKXsNCgl2YXIgZmlsZW5hbWUgPSBuZXRVcmwuc3Vic3RyaW5nKG5ldFVybC5sYXN0SW5kZXhPZigiLyIpICsgMSk7DQoJdmFyIGxvY2FsUGF0aCA9IGFwaS5jYWNoZURpciArICIvcGljLyIgKyBmaWxlbmFtZTsNCgl2YXIgb2JqID0gYXBpLnJlcXVpcmUoJ2ZzJyk7DQoJdmFyIHJldCA9IG9iai5leGlzdFN5bmMoew0KCSAgICBwYXRoOiBsb2NhbFBhdGgNCgl9KTsNCglpZiAocmV0LmV4aXN0KSB7DQoJCXJldHVybiBsb2NhbFBhdGg7DQoJfWVsc2V7DQoJCWlmKGxvY2FsUGF0aCE9JycmJm5ldFVybCE9bG9jYWxQYXRoKXsNCgkJCWFwaS5kb3dubG9hZCh7DQoJCQkJdXJsIDogbmV0VXJsLA0KCQkJCXNhdmVQYXRoIDogbG9jYWxQYXRoLA0KCQkJCXJlcG9ydCA6IGZhbHNlLA0KCQkJCWNhY2hlIDogdHJ1ZSwNCgkJCQlhbGxvd1Jlc3VtZSA6IHRydWUNCgkJCX0sIGZ1bmN0aW9uKHJldCwgZXJyKSB7DQoJCQkJaWYgKHJldCkgew0KCQkJCQljb25zb2xlLmxvZygn5paH5Lu25aSn5bCP77yaJyArIHJldC5maWxlU2l6ZSArICfvvJvkuIvovb3ov5vluqbvvJonICsgcmV0LnBlcmNlbnQgKyAn77yb5LiL6L2954q25oCBJyArIHJldC5zdGF0ZSArICflrZjlgqjot6/lvoQ6ICcgKyByZXQuc2F2ZVBhdGgpOw0KCQkJCX0gZWxzZSB7DQoJCQkJCWNvbnNvbGUubG9nKGVyci5tc2cpOw0KCQkJCX07DQoJCQl9KTsNCgkJfQ0KCQlyZXR1cm4gbmV0VXJsOw0KCX0NCn0NCg0KLy/moLnmja7lvZPliY3ns7vnu5/lj4rorr7lpIfmgKfog73vvIzov5Tlm57mnIDkvJjnmoTnvKnnlaXlm74NCmZ1bmN0aW9uIHJldHVyblNtYWxsZXJQaWMobmV0SW1nVXJsLGpzZnVuKXsKCWFwaS5pbWFnZUNhY2hlKHsNCgkgICAgdXJsOm5ldEltZ1VybCwKCSAgICB0aHVtYm5haWw6dHJ1ZQ0KICAgIH0sZnVuY3Rpb24ocmV0LGVycil7CiAgICAJaWYocmV0KXsNCiAgICAJCXJldHVybiBqc2Z1bihyZXQudXJsKTsNCiAgICAJfWVsc2V7DQogICAgCQlyZXR1cm4ganNmdW4obmV0SW1nVXJsKTsNCiAgICAJfQogICAgfSk7DQp9DQoNCi8qKg0KICog5qC55o2u6Lqr5Lu96K+B6I635Y+W5Ye655Sf5bm05pyI5pelDQogKi8NCiBmdW5jdGlvbiBnZXRCaXJ0aGRheUZyb21JZENhcmQoaWRDYXJkKSB7DQoJdmFyIGJpcnRoZGF5ID0gIiI7DQoJaWYoaWRDYXJkICE9IG51bGwgJiYgaWRDYXJkICE9ICIiKXsNCgkgICAgaWYoaWRDYXJkLmxlbmd0aCA9PSAxNSl7DQoJICAgICAgICBiaXJ0aGRheSA9ICIxOSIraWRDYXJkLnN1YnN0cig2LDYpOw0KCSAgICB9IGVsc2UgaWYoaWRDYXJkLmxlbmd0aCA9PSAxOCl7DQoJICAgICAgICBiaXJ0aGRheSA9IGlkQ2FyZC5zdWJzdHIoNiw4KTsNCgkgICAgfQ0KDQoJICAgIGJpcnRoZGF5ID0gYmlydGhkYXkucmVwbGFjZSgvKC57NH0pKC57Mn0pLywiJDEtJDItIik7DQoJfQ0KCXJldHVybiBiaXJ0aGRheTsNCiB9DQoNCg0KLy/ouqvku73or4Hpqozor4ENCi8vIOWHveaVsOWPguaVsOW/hemhu+aYr+Wtl+espuS4su+8jOWboOS4uuS6jOS7o+i6q+S7veivgeWPt+eggeaYr+WNgeWFq+S9je+8jOiAjOWcqGphdmFzY3JpcHTkuK3vvIzljYHlhavkvY3nmoTmlbDlgLzkvJrotoXlh7rorqHnrpfojIPlm7TvvIzpgKDmiJDkuI3nsr7noa7nmoTnu5PmnpzvvIzlr7zoh7TmnIDlkI7kuKTkvY3lkozorqHnrpfnmoTlgLzkuI3kuIDoh7TvvIzku47ogIzor6Xlh73mlbDlh7rnjrDplJnor6/jgIINCi8vIOivpuaDheafpeeci2phdmFzY3JpcHTnmoTmlbDlgLzojIPlm7QNCmZ1bmN0aW9uIGNoZWNrSURDYXJkKGlkY29kZSl7DQogICAgLy8g5Yqg5p2D5Zug5a2QDQogICAgdmFyIHdlaWdodF9mYWN0b3IgPSBbNyw5LDEwLDUsOCw0LDIsMSw2LDMsNyw5LDEwLDUsOCw0LDJdOw0KICAgIC8vIOagoemqjOeggQ0KICAgIHZhciBjaGVja19jb2RlID0gWycxJywgJzAnLCAnWCcgLCAnOScsICc4JywgJzcnLCAnNicsICc1JywgJzQnLCAnMycsICcyJ107DQoNCiAgICB2YXIgY29kZSA9IGlkY29kZSArICIiOw0KICAgIHZhciBsYXN0ID0gaWRjb2RlWzE3XTsvL+acgOWQjuS4gOS4qg0KDQogICAgdmFyIHNldmVudGVlbiA9IGNvZGUuc3Vic3RyaW5nKDAsMTcpOw0KDQogICAgLy8gSVNPIDcwNjQ6MTk4My5NT0QgMTEtMg0KICAgIC8vIOWIpOaWreacgOWQjuS4gOS9jeagoemqjOeggeaYr+WQpuato+ehrg0KICAgIHZhciBhcnIgPSBzZXZlbnRlZW4uc3BsaXQoIiIpOw0KICAgIHZhciBsZW4gPSBhcnIubGVuZ3RoOw0KICAgIHZhciBudW0gPSAwOw0KICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKyl7DQogICAgICAgIG51bSA9IG51bSArIGFycltpXSAqIHdlaWdodF9mYWN0b3JbaV07DQogICAgfQ0KDQogICAgLy8g6I635Y+W5L2Z5pWwDQogICAgdmFyIHJlc2lzdWUgPSBudW0lMTE7DQogICAgdmFyIGxhc3Rfbm8gPSBjaGVja19jb2RlW3Jlc2lzdWVdOw0KDQogICAgLy8g5qC85byP55qE5q2j5YiZDQogICAgLy8g5q2j5YiZ5oCd6LevDQogICAgLyoNCgkgICAg56ys5LiA5L2N5LiN5Y+v6IO95pivMA0KCSAgICDnrKzkuozkvY3liLDnrKzlha3kvY3lj6/ku6XmmK8wLTkNCgkgICAg56ys5LiD5L2N5Yiw56ys5Y2B5L2N5piv5bm05Lu977yM5omA5Lul5LiD5YWr5L2N5Li6MTnmiJbogIUyMA0KCSAgICDljYHkuIDkvY3lkozljYHkuozkvY3mmK/mnIjku73vvIzov5nkuKTkvY3mmK8wMS0xMuS5i+mXtOeahOaVsOWAvA0KCSAgICDljYHkuInkvY3lkozljYHlm5vkvY3mmK/ml6XmnJ/vvIzmmK/ku44wMS0zMeS5i+mXtOeahOaVsOWAvA0KCSAgICDljYHkupTvvIzljYHlha3vvIzljYHkuIPpg73mmK/mlbDlrZcwLTkNCgkgICAg5Y2B5YWr5L2N5Y+v6IO95piv5pWw5a2XMC0577yM5Lmf5Y+v6IO95pivWA0KICAgICovDQogICAgdmFyIGlkY2FyZF9wYXR0ZXIgPSAvXlsxLTldWzAtOV17NX0oWzFdWzldWzAtOV17Mn18WzJdWzBdWzB8MV1bMC05XSkoWzBdWzEtOV18WzFdWzB8MXwyXSkoWzBdWzEtOV18WzF8Ml1bMC05XXxbM11bMHwxXSlbMC05XXszfShbMC05XXxbWF0pJC87DQoNCiAgICAvLyDliKTmlq3moLzlvI/mmK/lkKbmraPnoa4NCiAgICB2YXIgZm9ybWF0ID0gaWRjYXJkX3BhdHRlci50ZXN0KGlkY29kZSk7DQoNCiAgICAvLyDov5Tlm57pqozor4Hnu5PmnpzvvIzmoKHpqoznoIHlkozmoLzlvI/lkIzml7bmraPnoa7miY3nrpfmmK/lkIjms5XnmoTouqvku73or4Hlj7fnoIENCiAgICByZXR1cm4gbGFzdCA9PT0gbGFzdF9ubyAmJiBmb3JtYXQgPyB0cnVlIDogZmFsc2U7DQogICAgLy9yZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDovabniYzlj7fmoKHpqowgDQogKi8NCmZ1bmN0aW9uIGlzVmVoaWNsZU51bWJlcih2ZWhpY2xlTnVtYmVyKSB7ICAgICAgDQoJdmFyIHJlc3VsdCA9IGZhbHNlOyAgICAgIA0KCWlmICh2ZWhpY2xlTnVtYmVyLmxlbmd0aCA9PSA3KXsNCgkgICAgdmFyIGV4cHJlc3MgPSAvXlvkuqzmtKXmsqrmuJ3lhoDosavkupHovr3pu5HmuZjnmpbpsoHmlrDoi4/mtZnotaPphILmoYLnlJjmmYvokpnpmZXlkInpl73otLXnsqTpnZLol4/lt53lroHnkLzkvb/pooZBLVpdezF9W0EtWl17MX1bQS1aMC05XXs0fVtBLVowLTnmjILlraborabmuK/mvrNdezF9JC87DQoJICAgIHJlc3VsdCA9IGV4cHJlc3MudGVzdCh2ZWhpY2xlTnVtYmVyKTsgICAgICANCiAgICB9ICAgICAgDQogICAgcmV0dXJuIHJlc3VsdDsNCiB9DQoNCi8v6aqM6K+B56CBNjBz5LiN6IO95pON5L2cDQp2YXIgYyA9IDYwOw0KZnVuY3Rpb24gdGltZWRDb3VudChtZXMpew0KCXZhciBjb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NuJyk7DQoJaWYoMSA8IGMgJiYgYyA8PSA2MCkgew0KCQljID0gYyAtIDE7DQoJCWNvZGUuaW5uZXJIVE1MID0gIuetieW+hSIgKyBjICsgIuenkiI7DQoJCXNldFRpbWVvdXQoInRpbWVkQ291bnQoJyIrbWVzKyInKSIsIDEwMDApOw0KCQljb2RlLm9uY2xpY2sgPSAiIjsNCgl9IGVsc2UgaWYoYyA9PSAxKSB7DQoJCWNvZGUuaW5uZXJIVE1MID0gbWVzOw0KCQkkKCIjY24iKS5hdHRyKCJvbmNsaWNrIiwiZ2V0TWVzc2FnZSgpIik7DQoJCWMgPSA2MDsNCgl9DQp9DQoNCi8v6aqM6K+B5omL5py65Y+3DQpmdW5jdGlvbiBpc1Bob25lQXZhaWxhYmxlKHBob25lKSB7DQogICAgdmFyIG15cmVnID0gL15bMV1bMyw0LDUsNyw4LDldWzAtOV17OX0kLzsNCiAgICBpZiAoIW15cmVnLnRlc3QocGhvbmUpKSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQp9DQoNCi8v6aqM6K+B5a+G56CBDQpmdW5jdGlvbiBpc1Bhc3N3b3JkQXZhaWxhYmxlKHBhc3N3b3JkKXsNCgl2YXIgcmVnID0gL15bXHddezYsMTJ9JC87DQoJaWYoIXBhc3N3b3JkLm1hdGNoKHJlZykpew0KCSAgICByZXR1cm4gZmFsc2U7DQoJfWVsc2V7DQoJICAgIHJldHVybiB0cnVlOw0KCX0NCn0NCg0KLy/orqHnrpfot53nprvlvZPliY3ml7bpl7TnmoTot53nprsNCnZhciBwYXJhbWV0ZXI7DQp2YXIgbm93X3RpbWU7DQp2YXIgZGlmZmVyZW5jZTsNCnZhciBkYXlzOw0KdmFyIGhvdXJzOw0KdmFyIG1pbnV0ZXM7DQp2YXIgc2Vjb25kczsNCmZ1bmN0aW9uIGNhbGN1VGltZSh0aW1lKXsNCglwYXJhbWV0ZXIgPSBuZXcgRGF0ZSh0aW1lLnJlcGxhY2UoLy0vZywgJy8nKSk7DQoJbm93X3RpbWUgPSBuZXcgRGF0ZSgpOw0KCWRpZmZlcmVuY2UgPSBub3dfdGltZS5nZXRUaW1lKCkgLSBwYXJhbWV0ZXIuZ2V0VGltZSgpOyAgLy/ml7bpl7Tlt67nmoTmr6vnp5LmlbANCgkvL+iuoeeul+WHuuebuOW3ruWkqeaVsA0KCWRheXMgPSBNYXRoLmZsb29yKGRpZmZlcmVuY2UvKDI0KjM2MDAqMTAwMCkpOw0KCWlmKGRheXMgPj0gOTApew0KCQlyZXR1cm4gJzPkuKrmnIjliY0nOw0KCX1lbHNlIGlmKGRheXMgPj0gMzApew0KCQlyZXR1cm4gJzHkuKrmnIjliY0nOw0KCX1lbHNlIGlmKGRheXMgPj0gNyl7DQoJCXJldHVybiAnMeekvOaLnOWJjSc7DQoJfWVsc2UgaWYoZGF5cyA+PSAzKXsNCgkJcmV0dXJuICcz5aSp5YmNJzsNCgl9ZWxzZSBpZihkYXlzID49IDEpew0KCQlyZXR1cm4gJzHlpKnliY0nOw0KCX1lbHNlew0KCQlob3VycyA9IE1hdGguZmxvb3IoZGlmZmVyZW5jZS8oMzYwMCoxMDAwKSk7DQoJCWlmKGhvdXJzID49IDEpew0KCQkJcmV0dXJuIGhvdXJzICsgJ+Wwj+aXtuWJjSc7Ly/lpKfkuo4x5bCP5pe25bCP5LqOMeWkqeeahOaXtumXtOW3ruebtOaOpeaYvuekug0KCQl9ZWxzZXsNCgkJCW1pbnV0ZXMgPSBNYXRoLmZsb29yKGRpZmZlcmVuY2UvKDYwKjEwMDApKTsNCgkJCWlmKG1pbnV0ZXMgPj0gMSl7DQoJCQkJcmV0dXJuIG1pbnV0ZXMgKyAn5YiG6ZKf5YmNJzsvL+Wkp+S6jjHliIbpkp/lsI/kuo4x5bCP5pe255qE5pe26Ze05beu55u05o6l5pi+56S6DQoJCQl9ZWxzZXsNCgkJCQlyZXR1cm4gJ+WImuWImic7DQoJCQl9DQoJCX0NCgl9DQp9DQoNCi8qKg0KICog5pe26Ze06L2s5pe26Ze05oizDQogKi8NCmZ1bmN0aW9uIHRpbWVUb1RpbWVzdGFtcChkYXRlKXsNCglyZXR1cm4gcGFyc2VJbnQoZGF0ZS5nZXRUaW1lKCkvMTAwMCk7DQp9DQoNCi8qKg0KICog5pe26Ze05qC85byP5YyWIA0KICovDQpmdW5jdGlvbiB0aW1lX2Zvcm1hdCh0aW1lKXsNCgl2YXIgaG91clJvdW5kcyA9IE1hdGguZmxvb3IodGltZS82MC82MCk7DQogIAl2YXIgbWluUm91bmRzID0gTWF0aC5mbG9vcih0aW1lLzYwKTsNCiAgCWlmKHRpbWUgPT0gMCl7DQogIAkJcmV0dXJuICcw56eSJzsNCiAgCX1lbHNlIGlmKHRpbWUgPCA2MCl7DQoJICAgIHJldHVybiAn5bCP5LqOMeWIhic7DQogIAl9ZWxzZSBpZihob3VyUm91bmRzID09IDApew0KCSAgICByZXR1cm4gbWluUm91bmRzICsgJ+WIhic7DQogIAl9ZWxzZXsNCgkgICAgcmV0dXJuIGhvdXJSb3VuZHMgKyAn5bCP5pe2JyArIG1pblJvdW5kcyArICfliIYnOw0KICAJfQ0KfQ0KDQovKioNCiAqIOaJk+aXpeW/lw0KICovDQpmdW5jdGlvbiBsb2cobXNnLGRhdGEpew0KCWNvbnNvbGUubG9nKG1zZyArIEpTT04uc3RyaW5naWZ5KGRhdGEpKTsNCn0NCg0KLyoqDQogKiDorqHnrpfkuKTkuKrml7bpl7TmrrXkuYvlt64NCiAqLw0KdmFyIHN0YXJ0VGltZTsNCnZhciBlbmRUaW1lOw0KZnVuY3Rpb24gY2FsY3VUaW1lVmFsdWUoc3RhcnRUaW1lLGVuZFRpbWUpew0KCXN0YXJ0VGltZSA9IG5ldyBEYXRlKHN0YXJ0VGltZSk7DQoJZW5kVGltZSA9IG5ldyBEYXRlKGVuZFRpbWUpOw0KCWRpZmZlcmVuY2UgPSBlbmRUaW1lLmdldFRpbWUoKSAtIHN0YXJ0VGltZS5nZXRUaW1lKCk7ICAvL+aXtumXtOW3rueahOavq+enkuaVsA0KCWRheXMgPSBNYXRoLmZsb29yKGRpZmZlcmVuY2UvKDI0KjM2MDAqMTAwMCkpOw0KCXZhciBsZWF2ZTE9IGRpZmZlcmVuY2UlKDI0KjM2MDAqMTAwMCk7ICAgIC8v6K6h566X5aSp5pWw5ZCO5Ymp5L2Z55qE5q+r56eS5pWwDQoJaG91cnMgPSBNYXRoLmZsb29yKGxlYXZlMS8oMzYwMCoxMDAwKSk7DQoJdmFyIGxlYXZlMiA9IGxlYXZlMSUoMzYwMCoxMDAwKTsgICAgICAgIC8v6K6h566X5bCP5pe25pWw5ZCO5Ymp5L2Z55qE5q+r56eS5pWwDQoJbWludXRlcyA9IE1hdGguZmxvb3IobGVhdmUyLyg2MCoxMDAwKSk7DQoJdmFyIGxlYXZlMyA9IGxlYXZlMiUoNjAqMTAwMCk7ICAgICAvL+iuoeeul+WIhumSn+aVsOWQjuWJqeS9meeahOavq+enkuaVsA0KCXNlY29uZHMgPSBNYXRoLnJvdW5kKGxlYXZlMy8xMDAwKTsNCglyZXR1cm4gKGRheXMgPT0gMD8nJzpkYXlzICsgIuWkqSIpICsgKGhvdXJzID09IDA/Jyc6aG91cnMgKyAi5bCP5pe2IikgKyAobWludXRlcyA9PSAwPycnOm1pbnV0ZXMgKyAi5YiGIikgKyAoc2Vjb25kcyA9PSAwPycnOnNlY29uZHMgKyAi56eSIik7DQp9DQoNCi8vIOWvuURhdGXnmoTmianlsZXvvIzlsIYgRGF0ZSDovazljJbkuLrmjIflrprmoLzlvI/nmoRTdHJpbmcNCi8vIOaciChNKeOAgeaXpShkKeOAgeWwj+aXtihoKeOAgeWIhihtKeOAgeenkihzKeOAgeWto+W6pihxKSDlj6/ku6XnlKggMS0yIOS4quWNoOS9jeespu+8jA0KLy8g5bm0KHkp5Y+v5Lul55SoIDEtNCDkuKrljaDkvY3nrKbvvIzmr6vnp5IoUynlj6rog73nlKggMSDkuKrljaDkvY3nrKYo5pivIDEtMyDkvY3nmoTmlbDlrZcpDQovLyDkvovlrZDvvJoNCi8vIChuZXcgRGF0ZSgpKS5Gb3JtYXQoInl5eXktTU0tZGQgaGg6bW06c3MuUyIpID09PiAyMDA2LTA3LTAyIDA4OjA5OjA0LjQyMw0KLy8gKG5ldyBEYXRlKCkpLkZvcm1hdCgieXl5eS1NLWQgaDptOnMuUyIpICAgICAgPT0+IDIwMDYtNy0yIDg6OTo0LjE4DQpEYXRlLnByb3RvdHlwZS5Gb3JtYXQgPSBmdW5jdGlvbiAoZm10KSB7IC8vYXV0aG9yOiBtZWl6eg0KICAgIHZhciBvID0gew0KCSAgICAiTSsiIDogdGhpcy5nZXRNb250aCgpKzEsIC8v5pyI5Lu9DQoJICAgICJkKyIgOiB0aGlzLmdldERhdGUoKSwgLy/ml6UNCgkgICAgImgrIiA6IHRoaXMuZ2V0SG91cnMoKSUxMiA9PSAwID8gMTIgOiB0aGlzLmdldEhvdXJzKCklMTIsIC8v5bCP5pe2DQoJICAgICJIKyIgOiB0aGlzLmdldEhvdXJzKCksIC8v5bCP5pe2DQoJICAgICJtKyIgOiB0aGlzLmdldE1pbnV0ZXMoKSwgLy/liIYNCgkgICAgInMrIiA6IHRoaXMuZ2V0U2Vjb25kcygpLCAvL+enkg0KCSAgICAicSsiIDogTWF0aC5mbG9vcigodGhpcy5nZXRNb250aCgpKzMpLzMpLCAvL+Wto+W6pg0KCSAgICAiUyIgOiB0aGlzLmdldE1pbGxpc2Vjb25kcygpIC8v5q+r56eSDQoJICAgIH07DQogICAgdmFyIHdlZWsgPSB7DQoJICAgICIwIiA6ICLml6UiLA0KCSAgICAiMSIgOiAi5LiAIiwNCgkgICAgIjIiIDogIuS6jCIsDQoJICAgICIzIiA6ICLkuIkiLA0KCSAgICAiNCIgOiAi5ZubIiwNCgkgICAgIjUiIDogIuS6lCIsDQoJICAgICI2IiA6ICLlha0iDQogICAgfTsNCiAgICBpZigvKHkrKS8udGVzdChmbXQpKXsNCiAgICAgICAgZm10PWZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKHRoaXMuZ2V0RnVsbFllYXIoKSsiIikuc3Vic3RyKDQgLSBSZWdFeHAuJDEubGVuZ3RoKSk7DQogICAgfQ0KICAgIGlmKC8oRSspLy50ZXN0KGZtdCkpew0KICAgICAgICBmbXQ9Zm10LnJlcGxhY2UoUmVnRXhwLiQxLCAoKFJlZ0V4cC4kMS5sZW5ndGg+MSkgPyAoUmVnRXhwLiQxLmxlbmd0aD4yID8gIuaYn+acnyIgOiAi5ZGoIikgOiAiIikrd2Vla1t0aGlzLmdldERheSgpKyIiXSk7DQogICAgfQ0KICAgIGZvcih2YXIgayBpbiBvKXsNCiAgICAgICAgaWYobmV3IFJlZ0V4cCgiKCIrIGsgKyIpIikudGVzdChmbXQpKXsNCiAgICAgICAgICAgIGZtdCA9IGZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKFJlZ0V4cC4kMS5sZW5ndGg9PTEpID8gKG9ba10pIDogKCgiMDAiKyBvW2tdKS5zdWJzdHIoKCIiKyBvW2tdKS5sZW5ndGgpKSk7DQogICAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIGZtdDsNCn0NCg0KLyoqDQogKiDliKTmlq3mmK/lkKbotoXml7YNCiAqLw0KZnVuY3Rpb24gaXNUaW1lb3V0KHRpbWUsZGF0ZSl7DQoJdmFyIHRoaXNfdGltZSA9IGRhdGUucmVwbGFjZSgiLSIsICIvIikucmVwbGFjZSgiLSIsICIvIikuc3Vic3RyaW5nKDAsMTApICsgJyAnKyB0aW1lICsgJzowMCc7DQoJaWYobmV3IERhdGUoKS5nZXRUaW1lKCkgPj0gbmV3IERhdGUodGhpc190aW1lKS5nZXRUaW1lKCkpew0KCQlyZXR1cm4gdHJ1ZTsNCgl9ZWxzZXsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCn0NCg0KLyoqDQogKiDml7bpl7Tmjqfku7Yg77yM6ZyA6KaB5byV5YWl5o+S5Lu2DQogKi8NCmZ1bmN0aW9uIG1vYmlzY3JvbGxEYXRlKG1pbkRhdGUsbWF4RGF0ZSxlLG5vd1RleHQpew0KCXZhciBjdXJyWWVhciA9IChuZXcgRGF0ZSgpKS5nZXRGdWxsWWVhcigpOw0KCXZhciBvcHQ9e307DQoJb3B0LmRhdGUgPSB7cHJlc2V0IDogJ2RhdGUnfTsNCglvcHQuZGF0ZXRpbWUgPSB7cHJlc2V0IDogJ2RhdGV0aW1lJ307DQoJb3B0LnRpbWUgPSB7cHJlc2V0IDogJ3RpbWUnfTsNCglvcHQuZGVmYXVsdCA9IHsNCgkJdGhlbWU6ICdhbmRyb2lkLWljcyBsaWdodCcsIC8v55qu6IKk5qC35byPDQoJCWRpc3BsYXk6ICdtb2RhbCcsIC8v5pi+56S65pa55byPDQoJCW1vZGU6ICdzY3JvbGxlcicsIC8v5pel5pyf6YCJ5oup5qih5byPDQoJCWRhdGVGb3JtYXQ6ICd5eXl5LW1tLWRkJywNCgkJbGFuZzogJ3poJywNCgkJc2hvd05vdzogdHJ1ZSwNCgkJbm93VGV4dDogbm93VGV4dCwNCgkJbWluRGF0ZTogbmV3IERhdGUobWluRGF0ZSksDQoJCW1heERhdGU6IG5ldyBEYXRlKG1heERhdGUpLA0KCQlwcmVzZXQ6ICdkYXRlJy8v5pel5pyf57G75Z6LLS1kYXRhdGltZSAtLXRpbWUsDQoJfQ0KCSQoZSkubW9iaXNjcm9sbCgkLmV4dGVuZChvcHRbJ2RhdGV0aW1lJ10sIG9wdFsnZGVmYXVsdCddKSk7DQp9DQoNCi8qKg0KICog5piv5ZCm5ZCr5pyJ5p+Q5LiAanPmlofku7YNCiAqIEBwYXJhbSB7T2JqZWN0fSBuYW1lDQogKi8NCmZ1bmN0aW9uIGlzSW5jbHVkZShuYW1lKXsNCiAgICB2YXIganM9IC9qcyQvaS50ZXN0KG5hbWUpOw0KICAgIHZhciBlcz1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShqcz8nc2NyaXB0JzonbGluaycpOw0KICAgIGZvcih2YXIgaT0wO2k8ZXMubGVuZ3RoO2krKykNCiAgICBpZihlc1tpXVtqcz8nc3JjJzonaHJlZiddLmluZGV4T2YobmFtZSkhPS0xKXJldHVybiB0cnVlOw0KICAgIHJldHVybiBmYWxzZTsNCn0NCg0KLyoqDQogKiDmjqfliLZyZW3lpKflsI8NCiAqIEBwYXJhbSB7T2JqZWN0fSBkb2MNCiAqIEBwYXJhbSB7T2JqZWN0fSB3aW4NCiAqLw0KKGZ1bmN0aW9uKGRvYywgd2luKSB7DQoJdmFyIGRvY0VsID0gZG9jLmRvY3VtZW50RWxlbWVudCwNCgkJcmVzaXplRXZ0ID0gJ29yaWVudGF0aW9uY2hhbmdlJyBpbiB3aW5kb3cgPyAnb3JpZW50YXRpb25jaGFuZ2UnIDogJ3Jlc2l6ZScsDQoJCXJlY2FsYyA9IGZ1bmN0aW9uKCkgew0KCQkJdmFyIGNsaWVudFdpZHRoID0gZG9jRWwuY2xpZW50V2lkdGg7DQoJCQlpZiAoIWNsaWVudFdpZHRoKSByZXR1cm47DQoJCQlpZiAoY2xpZW50V2lkdGggPj0gNzUwKSB7DQoJCQkJY2xpZW50V2lkdGggPSA3NTA7DQoJCQl9IGVsc2UgaWYgKGNsaWVudFdpZHRoIDw9IDMyMCkgew0KCQkJCWNsaWVudFdpZHRoID0gMzIwOw0KCQkJfSBlbHNlIHsNCgkJCQljbGllbnRXaWR0aCA9IGNsaWVudFdpZHRoOw0KCQkJfQ0KCQkJZG9jRWwuc3R5bGUuZm9udFNpemUgPSAyMCAqIChjbGllbnRXaWR0aCAvIDM3NSkgKyAncHgnOw0KCQl9Ow0KCWlmICghZG9jLmFkZEV2ZW50TGlzdGVuZXIpIHJldHVybjsNCgl3aW4uYWRkRXZlbnRMaXN0ZW5lcihyZXNpemVFdnQsIHJlY2FsYywgZmFsc2UpOw0KCWRvYy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgcmVjYWxjLCBmYWxzZSk7DQp9KShkb2N1bWVudCwgd2luZG93KTsNCg0KLy9iYXNlNjQNCnZhciBCYXNlNjQgPSB7DQoNCiAgICAvLyBwcml2YXRlIHByb3BlcnR5DQogICAgX2tleVN0cjogIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89IiwNCg0KICAgIC8vIHB1YmxpYyBtZXRob2QgZm9yIGVuY29kaW5nDQogICAgZW5jb2RlOiBmdW5jdGlvbihpbnB1dCkgew0KICAgICAgICB2YXIgb3V0cHV0ID0gIiI7DQogICAgICAgIHZhciBjaHIxLCBjaHIyLCBjaHIzLCBlbmMxLCBlbmMyLCBlbmMzLCBlbmM0Ow0KICAgICAgICB2YXIgaSA9IDA7DQoNCiAgICAgICAgaW5wdXQgPSBCYXNlNjQuX3V0ZjhfZW5jb2RlKGlucHV0KTsNCg0KICAgICAgICB3aGlsZSAoaSA8IGlucHV0Lmxlbmd0aCkgew0KDQogICAgICAgICAgICBjaHIxID0gaW5wdXQuY2hhckNvZGVBdChpKyspOw0KICAgICAgICAgICAgY2hyMiA9IGlucHV0LmNoYXJDb2RlQXQoaSsrKTsNCiAgICAgICAgICAgIGNocjMgPSBpbnB1dC5jaGFyQ29kZUF0KGkrKyk7DQoNCiAgICAgICAgICAgIGVuYzEgPSBjaHIxID4+IDI7DQogICAgICAgICAgICBlbmMyID0gKChjaHIxICYgMykgPDwgNCkgfCAoY2hyMiA+PiA0KTsNCiAgICAgICAgICAgIGVuYzMgPSAoKGNocjIgJiAxNSkgPDwgMikgfCAoY2hyMyA+PiA2KTsNCiAgICAgICAgICAgIGVuYzQgPSBjaHIzICYgNjM7DQoNCiAgICAgICAgICAgIGlmIChpc05hTihjaHIyKSkgew0KICAgICAgICAgICAgICAgIGVuYzMgPSBlbmM0ID0gNjQ7DQogICAgICAgICAgICB9IGVsc2UgaWYgKGlzTmFOKGNocjMpKSB7DQogICAgICAgICAgICAgICAgZW5jNCA9IDY0Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQgKyB0aGlzLl9rZXlTdHIuY2hhckF0KGVuYzEpICsgdGhpcy5fa2V5U3RyLmNoYXJBdChlbmMyKSArIHRoaXMuX2tleVN0ci5jaGFyQXQoZW5jMykgKyB0aGlzLl9rZXlTdHIuY2hhckF0KGVuYzQpOw0KDQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gb3V0cHV0Ow0KICAgIH0sDQoNCiAgICAvLyBwdWJsaWMgbWV0aG9kIGZvciBkZWNvZGluZw0KICAgIGRlY29kZTogZnVuY3Rpb24oaW5wdXQpIHsNCiAgICAgICAgdmFyIG91dHB1dCA9ICIiOw0KICAgICAgICB2YXIgY2hyMSwgY2hyMiwgY2hyMzsNCiAgICAgICAgdmFyIGVuYzEsIGVuYzIsIGVuYzMsIGVuYzQ7DQogICAgICAgIHZhciBpID0gMDsNCg0KICAgICAgICBpbnB1dCA9IGlucHV0LnJlcGxhY2UoL1teQS1aYS16MC05XCtcL1w9XS9nLCAiIik7DQoNCiAgICAgICAgd2hpbGUgKGkgPCBpbnB1dC5sZW5ndGgpIHsNCg0KICAgICAgICAgICAgZW5jMSA9IHRoaXMuX2tleVN0ci5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTsNCiAgICAgICAgICAgIGVuYzIgPSB0aGlzLl9rZXlTdHIuaW5kZXhPZihpbnB1dC5jaGFyQXQoaSsrKSk7DQogICAgICAgICAgICBlbmMzID0gdGhpcy5fa2V5U3RyLmluZGV4T2YoaW5wdXQuY2hhckF0KGkrKykpOw0KICAgICAgICAgICAgZW5jNCA9IHRoaXMuX2tleVN0ci5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTsNCg0KICAgICAgICAgICAgY2hyMSA9IChlbmMxIDw8IDIpIHwgKGVuYzIgPj4gNCk7DQogICAgICAgICAgICBjaHIyID0gKChlbmMyICYgMTUpIDw8IDQpIHwgKGVuYzMgPj4gMik7DQogICAgICAgICAgICBjaHIzID0gKChlbmMzICYgMykgPDwgNikgfCBlbmM0Ow0KDQogICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGNocjEpOw0KDQogICAgICAgICAgICBpZiAoZW5jMyAhPSA2NCkgew0KICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCArIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hyMik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoZW5jNCAhPSA2NCkgew0KICAgICAgICAgICAgICAgIG91dHB1dCA9IG91dHB1dCArIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hyMyk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KDQogICAgICAgIG91dHB1dCA9IEJhc2U2NC5fdXRmOF9kZWNvZGUob3V0cHV0KTsNCg0KICAgICAgICByZXR1cm4gb3V0cHV0Ow0KDQogICAgfSwNCg0KICAgIC8vIHByaXZhdGUgbWV0aG9kIGZvciBVVEYtOCBlbmNvZGluZw0KICAgIF91dGY4X2VuY29kZTogZnVuY3Rpb24oc3RyaW5nKSB7DQogICAgICAgIHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKC9cclxuL2csICJcbiIpOw0KICAgICAgICB2YXIgdXRmdGV4dCA9ICIiOw0KDQogICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgc3RyaW5nLmxlbmd0aDsgbisrKSB7DQoNCiAgICAgICAgICAgIHZhciBjID0gc3RyaW5nLmNoYXJDb2RlQXQobik7DQoNCiAgICAgICAgICAgIGlmIChjIDwgMTI4KSB7DQogICAgICAgICAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpOw0KICAgICAgICAgICAgfSBlbHNlIGlmICgoYyA+IDEyNykgJiYgKGMgPCAyMDQ4KSkgew0KICAgICAgICAgICAgICAgIHV0ZnRleHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoYyA+PiA2KSB8IDE5Mik7DQogICAgICAgICAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjICYgNjMpIHwgMTI4KTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjID4+IDEyKSB8IDIyNCk7DQogICAgICAgICAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYyA+PiA2KSAmIDYzKSB8IDEyOCk7DQogICAgICAgICAgICAgICAgdXRmdGV4dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKChjICYgNjMpIHwgMTI4KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHV0ZnRleHQ7DQogICAgfSwNCg0KICAgIC8vIHByaXZhdGUgbWV0aG9kIGZvciBVVEYtOCBkZWNvZGluZw0KICAgIF91dGY4X2RlY29kZTogZnVuY3Rpb24odXRmdGV4dCkgew0KICAgICAgICB2YXIgc3RyaW5nID0gIiI7DQogICAgICAgIHZhciBpID0gMDsNCiAgICAgICAgdmFyIGMgPSBjMSA9IGMyID0gMDsNCg0KICAgICAgICB3aGlsZSAoaSA8IHV0ZnRleHQubGVuZ3RoKSB7DQoNCiAgICAgICAgICAgIGMgPSB1dGZ0ZXh0LmNoYXJDb2RlQXQoaSk7DQoNCiAgICAgICAgICAgIGlmIChjIDwgMTI4KSB7DQogICAgICAgICAgICAgICAgc3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7DQogICAgICAgICAgICAgICAgaSsrOw0KICAgICAgICAgICAgfSBlbHNlIGlmICgoYyA+IDE5MSkgJiYgKGMgPCAyMjQpKSB7DQogICAgICAgICAgICAgICAgYzIgPSB1dGZ0ZXh0LmNoYXJDb2RlQXQoaSArIDEpOw0KICAgICAgICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYyAmIDMxKSA8PCA2KSB8IChjMiAmIDYzKSk7DQogICAgICAgICAgICAgICAgaSArPSAyOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBjMiA9IHV0ZnRleHQuY2hhckNvZGVBdChpICsgMSk7DQogICAgICAgICAgICAgICAgYzMgPSB1dGZ0ZXh0LmNoYXJDb2RlQXQoaSArIDIpOw0KICAgICAgICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYyAmIDE1KSA8PCAxMikgfCAoKGMyICYgNjMpIDw8IDYpIHwgKGMzICYgNjMpKTsNCiAgICAgICAgICAgICAgICBpICs9IDM7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gc3RyaW5nOw0KICAgIH0NCn0NCg0KLyoqDQogKiDlm77niYfovaxiYXNlNjQNCiAqIEBwYXJhbSB7T2JqZWN0fSB1cmwNCiAqIEBwYXJhbSB7T2JqZWN0fSBjYWxsYmFjaw0KICovDQpmdW5jdGlvbiBwaWNUb0Jhc2U2NCh1cmwsIGNhbGxiYWNrKXsNCgl2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnQ0FOVkFTJyksDQogICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyksDQoJaW1nID0gbmV3IEltYWdlOw0KCWltZy5jcm9zc09yaWdpbiA9ICdBbm9ueW1vdXMnOw0KCWltZy5vbmxvYWQgPSBmdW5jdGlvbigpew0KCQl2YXIgc2NhbGUgPSBpbWcud2lkdGgvaW1nLmhlaWdodDsNCgkJLy/ljovnvKnliLA4MDBweOetieavlOS+iw0KCQkkKGNhbnZhcykuYXR0cih7DQogICAgICAgICAgICB3aWR0aDogODAwLA0KICAgICAgICAgICAgaGVpZ2h0OiA4MDAvc2NhbGUNCiAgICAgICAgfSk7DQoJCWN0eC5kcmF3SW1hZ2UoaW1nLDAsMCw4MDAsODAwL3NjYWxlKTsNCgkJdmFyIGRhdGFVUkwgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnLDAuOCB8fCAwLjgpOw0KCQljYWxsYmFjayhkYXRhVVJMKTsNCgkJY2FudmFzID0gbnVsbDsNCgl9Ow0KCWltZy5zcmMgPSB1cmw7DQp9DQoNCg0KDQovLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS3lhbPkuo7mnKzlnLDnvJPlrZjnmoTlpITnkIbmlrnms5UtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KDQovKioNCiAqIOWIpOaWreaYr+WQpueZu+W9lQ0KICovDQpmdW5jdGlvbiBpc2xvZ2luKCl7DQoJaWYoJGFwaS5nZXRTdG9yYWdlKCdpc2xvZ2luJykgPT0gJ3RydWUnKXsNCgkJcmV0dXJuIHRydWU7DQoJfWVsc2V7DQoJCXJldHVybiBmYWxzZTsNCgl9DQp9DQoNCi8qKg0KICog5Yik5pat5piv5ZCm5bey6YCS5Lqk5a6e5ZCN6K6k6K+BDQogKi8NCmZ1bmN0aW9uIGlzYXV0aCgpew0KCS8vbG9nKCfnlKjmiLfkv6Hmga8nLCRhcGkuZ2V0U3RvcmFnZSgnY2FjaGVfYnlfYWNjb3VudCcpLmNhY2hlX2FjY291bnQpOw0KCWlmKCRhcGkuZ2V0U3RvcmFnZSgnY2FjaGVfYnlfYWNjb3VudCcpLmNhY2hlX2FjY291bnQuaWRlbnRpZmljYXRpb24gIT0gMCYmJGFwaS5nZXRTdG9yYWdlKCdjYWNoZV9ieV9hY2NvdW50JykuY2FjaGVfYWNjb3VudC5pZGVudGlmaWNhdGlvbiAhPSB1bmRlZmluZWQpey8vMOacquiupOivgTHorqTor4HkuK0y6K6k6K+B6YCa6L+HDQoJCXJldHVybiB0cnVlOw0KCX1lbHNlew0KCQlyZXR1cm4gZmFsc2U7DQoJfQ0KfQ0KDQovKioNCiAqIOWIpOaWreaYr+WQpuiupOivgemAmui/hw0KICovDQpmdW5jdGlvbiBpc2F1dGhwYXNzKCl7DQoJaWYoJGFwaS5nZXRTdG9yYWdlKCdjYWNoZV9ieV9hY2NvdW50JykuY2FjaGVfYWNjb3VudC5pZGVudGlmaWNhdGlvbiA9PSAyKXsvLzDmnKrorqTor4Ex6K6k6K+B5LitMuiupOivgemAmui/hw0KCQlyZXR1cm4gdHJ1ZTsNCgl9ZWxzZXsNCgkJcmV0dXJuIGZhbHNlOw0KCX0NCn0NCg0KLyoqDQogKiDmm7TmlrDmnKzlnLDlrablkZjkv6Hmga8NCiAqIEBwYXJhbSB7T2JqZWN0fSBmdW5jDQogKi8NCmZ1bmN0aW9uIHVwZGF0ZUxlYXJuZXJJbmZvKGZ1bmMpew0KCWRlZmF1bHRsb2FkKCfojrflj5blrablkZjkv6Hmga8uLi4nKTsNCgl1cmwgPSAnYXBpL2xlYXJuZXInOw0KCXBhcmFtcyA9IHsNCgkJbGVhcm5lcjp7DQoJCQlpZDpnZXRVc2VySWQoKQ0KCQl9DQoJfQ0KCWFqYXhfUmVxdWVzdCh1cmwsICdnZXQnLCAnanNvbicsIHBhcmFtcywgZnVuY3Rpb24ocmV0LGVycil7DQoJCWNsb3NlZGVmYXVsdGxvYWQoKTsNCgkJLy9sb2coJ+iOt+WPlueahOWtpuWRmOS/oeaBrycscmV0KTsNCgkJaWYocmV0JiZyZXQuY29kZSA9PSAwKXsNCgkJCXZhciBjYWNoZV9ieV9hY2NvdW50ID0gJGFwaS5nZXRTdG9yYWdlKCdjYWNoZV9ieV9hY2NvdW50Jyk7DQoJCQljYWNoZV9ieV9hY2NvdW50LmNhY2hlX2FjY291bnQgPSByZXQubGVhcm5lcjsNCgkJCSRhcGkuc2V0U3RvcmFnZSgnY2FjaGVfYnlfYWNjb3VudCcsY2FjaGVfYnlfYWNjb3VudCk7Ly/mm7TmlrBhcHDkuK3nmoTlrp7lkI3nvJPlrZjkv6Hmga8NCgkJfWVsc2V7DQoJCQlhbGVydF9tc2coJ+iOt+WPluWtpuWRmOS/oeaBr+Wksei0pScpOw0KCQl9DQoJCWZ1bmMocmV0LGVycik7DQoJfSk7DQp9DQoNCi8qKg0KICog5qC55o2uY29kZeiOt+WPluWtl+WFuOihqOS/oeaBr2xpc3QsY29kZeS4uueItuiKgueCuQ0KICogQHBhcmFtIHtPYmplY3R9IGNvZGUNCiAqIEBwYXJhbSB7T2JqZWN0fSBmdW5jDQogKi8NCmZ1bmN0aW9uIGdldERpY3Rpb25hcnlCeUNvZGUoY29kZSxmdW5jKXsNCgl2YXIgY2FjaGVfZGljdGlvbmFyeSA9ICRhcGkuZ2V0U3RvcmFnZSgnY2FjaGVfYnlfYXBwJykuY2FjaGVfZGljdGlvbmFyeTsNCglmdW5jKGNhY2hlX2RpY3Rpb25hcnlbY29kZV0uZGljdGlvbmFyeUxpc3QpOw0KfQ0KDQovKioNCiAqIOi/lOWbnuagh+etvuWQjeensA0KICovDQp2YXIgbGFiZWxzTWFwOw0KZnVuY3Rpb24gZ2V0TGFiZWxOYW1lKGNvZGUpew0KCWxhYmVsc01hcCA9ICRhcGkuZ2V0U3RvcmFnZSgnY2FjaGVfYnlfYXBwJykubGFiZWxzTWFwOw0KCXJldHVybiBsYWJlbHNNYXBbY29kZV0gIT0gdW5kZWZpbmVkP2xhYmVsc01hcFtjb2RlXTon5peg5pWI5qCH562+JzsNCn0NCg0KLyoqDQogKiDov5Tlm57popjnm67liIbnsbsNCiAqLw0KdmFyIHF1ZXN0aW9uVHlwZUtlTXVPbmVNYXA7DQp2YXIgcXVlc3Rpb25UeXBlS2VNdUZvdXJNYXA7DQpmdW5jdGlvbiBjaGVja1F1ZXN0aW9uVHlwZShjb2RlKXsNCglxdWVzdGlvblR5cGVLZU11T25lTWFwID0gJGFwaS5nZXRTdG9yYWdlKCdjYWNoZV9ieV9hcHAnKS5xdWVzdGlvblR5cGVLZU11T25lTWFwOw0KCXF1ZXN0aW9uVHlwZUtlTXVGb3VyTWFwID0gJGFwaS5nZXRTdG9yYWdlKCdjYWNoZV9ieV9hcHAnKS5xdWVzdGlvblR5cGVLZU11Rm91ck1hcDsNCglyZXR1cm4gcXVlc3Rpb25UeXBlS2VNdU9uZU1hcFtjb2RlXSAhPSB1bmRlZmluZWQ/cXVlc3Rpb25UeXBlS2VNdU9uZU1hcFtjb2RlXTpxdWVzdGlvblR5cGVLZU11Rm91ck1hcFtjb2RlXTsNCn0NCg0KLyoqDQogKiDov5Tlm57popjnm67nsbvlnosNCiAqLw0KdmFyIHF1ZXN0aW9uVHlwZU1hcDsNCmZ1bmN0aW9uIGNoZWNrUXVlc3Rpb25PZlR5cGUoY29kZSl7DQoJcXVlc3Rpb25UeXBlTWFwID0gJGFwaS5nZXRTdG9yYWdlKCdjYWNoZV9ieV9hcHAnKS5xdWVzdGlvblR5cGVNYXA7DQoJcmV0dXJuIHF1ZXN0aW9uVHlwZU1hcFtjb2RlXTsNCn0NCg0KLyoqDQogKiDov5Tlm57nq6DoioLlhoXlrrkNCiAqLw0KdmFyIGNoYXB0ZXJLdU11T25lTWFwOw0KdmFyIGNoYXB0ZXJLdU11Rm91ck1hcDsNCmZ1bmN0aW9uIHJldHVybkNoYXB0ZXIoY29kZSl7DQoJY2hhcHRlckt1TXVPbmVNYXAgPSAkYXBpLmdldFN0b3JhZ2UoJ2NhY2hlX2J5X2FwcCcpLmNoYXB0ZXJLdU11T25lTWFwOw0KCWNoYXB0ZXJLdU11Rm91ck1hcCA9ICRhcGkuZ2V0U3RvcmFnZSgnY2FjaGVfYnlfYXBwJykuY2hhcHRlckt1TXVGb3VyTWFwOw0KCXJldHVybiBjaGFwdGVyS3VNdU9uZU1hcFtjb2RlXSAhPSB1bmRlZmluZWQ/Y2hhcHRlckt1TXVPbmVNYXBbY29kZV06Y2hhcHRlckt1TXVGb3VyTWFwW2NvZGVdOw0KfQ0K"></script>
 <script type="text/javascript">
 	var cache;
 	var headerPos;
 	var frmName;
 	var articleId;
 	apiready = function(){
 		api.parseTapmode();
 		var header = $api.byId('aui-header');
 		var origal_h = $api.offset(header).h;
 		$api.fixStatusBar(header);
 		cache = api.pageParam.data;
 		log("参数",JSON.stringify(cache) )
 		articleId = cache.id;
 		headerPos = $api.offset(header);
 		cache.h_c = headerPos.h ;

 		frmName = 'shop_order_frm';
 		openFrame(frmName,headerPos.h, api.winHeight - headerPos.h,'none');
 		//支付成功
            toEventListener('goods_pay_success',function(ret,err){
                console.log("支付回调")
                console.log(JSON.stringify(ret))
                successPay(ret.value)
            });
 	}
 	function openFrame(frameName,y,h,animate){
 		api.openFrame({
             name: frmName,
             url: '../mine/shop_order_frm.html',
             bgColor:'#efeff4',
             rect: {
                 x: 0,
                 y: y,
                 w: 'auto',
                 h: h
             },
             animation:{
 	        	type:animate,                //动画类型（详见动画类型常量）
 			    subType:"from_right",       //动画子类型（详见动画子类型常量）
 			    duration:300
 	        },
             bounces: false,
             pageParam:{
             	data:cache
             },
             reload:true,
             softInputBarEnabled:true,
             softInputMode:'resize'
         });
 	}
 	
 	function successPay(data){
 	console.log("支付完成")
 	  openFrameCommon('goods_shop_notice_frm',data,headerPos.h,api.winHeight - headerPos.h,false);
 	}
 	function closeWin(){
 		api.closeWin({
 			name:'shop_order_win'
         });
 	}


 </script>
 </html>
